angular.module("app").controller("projectEdit",["$rootScope","$scope","$state","$stateParams","Project","Auth","API","UI",function(e,t,o,r,u,n,d,c){t.ondutyHour=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],t.ondutyMinute=["00","10","20","30","40","50"],t.offdutyHour=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],t.offdutyMinute=["00","10","20","30","40","50"],n.Check(function(){function e(e){c.AlertError(e.data.message)}t.Save=function(e){t.project.onduty=t.ondutyHour.selected+":"+t.ondutyMinute.selected,t.project.offduty=t.offdutyHour.selected+":"+t.offdutyMinute.selected,d.Query(u.update,t.project,function(e){e.code?c.AlertError(e.message):(c.AlertSuccess("修改成功"),o.go("admin.project.info"))},function(e){c.AlertError(e.data.message)})},d.Query(u.info,{id:r.id},function(e){if(e.err)c.AlertError(e.data.message);else{t.project=e.result;var o=moment(t.project.onduty,"H:mm");t.ondutyHour.selected=o.format("H"),t.ondutyMinute.selected=o.format("mm");var r=moment(t.project.offduty,"H:mm");t.offdutyHour.selected=r.format("H"),t.offdutyMinute.selected=r.format("mm")}},e)})}]);