angular.module("app").controller("projectInfo",["$rootScope","$scope","$api","Auth","UI","$uibModal",function(e,t,o,c,n,r){t.operateStatus={create:{isEnable:!1,url:"/create"},delete:{isEnable:!1,url:"/delete"},edit:{isEnable:!1,url:"/edit"}},t.askingRemoveID=void 0,t.currentPage=1,t.pageSize=15,c.Check(t.operateStatus,function(){o.project.info(function(t){angular.forEach(angular.copy(e.Project),function(t,o){delete e.Project[t._id],e.Project.splice(e.Project.length-o-1,1)}),angular.forEach(angular.isArray(t.result)?t.result:t.result&&[t.result]||[],function(t){e.Project.push(t),e.Project[t._id]=t}),e.Project.selected=e.Project[e.Project.selected._id]||e.Project[0]}),t.DoRemove=function(c,r){o.project.delete({id:c},function(o){e.Project.splice(t.pageSize*(t.currentPage-1)+r,1),delete e.Project[c]},function(e){n.AlertError(e.data.message)})},t.AskForRemove=function(e){t.askingRemoveID=e},t.CancelRemove=function(){delete t.askingRemoveID},t.$watch("currentPage",function(){delete t.askingRemoveID,n.PutPageIndex(void 0,t.currentPage)})}),t.changeStatus=function(e){r.open({size:"md",templateUrl:"changeStatus.html",controller:["$scope","$uibModalInstance",function(t,c){t.ok=function(){o.project.status({projectid:e._id,status:"ONLINE"},function(t){t.code&&(e.status="ONLINE")})},t.cancel=function(){c.dismiss("cancel")}}]})}}]);