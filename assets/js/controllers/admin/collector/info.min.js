angular.module("app").controller("CollectorIndex",["$scope","Collector","API","Auth","UI",function(e,t,n,r,o){e.operateStatus={create:{isEnable:!1,url:"/create"},delete:{isEnable:!1,url:"/delete"},edit:{isEnable:!1,url:"/edit"}},e.currentPage=1,e.askingRemoveID=void 0,r.Check(e.operateStatus,function(){function r(){n.Query(t.info,{project:e.Project.selected._id},function(t){t.err||(e.items=t.result)})}function a(e){o.AlertError(e.data.message)}e.DoRemove=function(r,u,c){r.preventDefault();var i=o.GetAbsoluteIndex(e.currentPage,c);n.Query(t.delete,{id:u},function(t){e.items.splice(i,1)},a)},e.AskForRemove=function(t,n){t.preventDefault(),e.askingRemoveID=n},e.CancelRemove=function(t,n){t.preventDefault(),e.askingRemoveID=void 0},e.$watch("Project.selected",r),e.$watch("currentPage",function(t){return t?void o.PutPageIndex(void 0,e.currentPage):void(e.currentPage=o.GetPageIndex())})})}]);