angular.module("app").component("addDaily",{templateUrl:"assets/html/admin/billingservice/addDaily.html",controller:["$scope","$api","$state",function(e,t,l){var a=this;a.fromto=!0,a.annual=!0,a.effectGenre=[{title:"物业费",value:"PAYPROPERTY"},{title:"停车费",value:"PAYPARKING"},{title:"空调费",value:"PAYAIRCONDITIONER"}],a.effectGenre.selected={value:a.effectGenre[0].value},a.unit=[{title:"日",value:"day"},{title:"月",value:"month"},{title:"户",value:"ONCE"}],a.unit.selected={value:a.unit[0].value},a.cycle=[{title:"年",value:"0"},{title:"半年",value:"2"},{title:"季度",value:"1"},{title:"月",value:"month"}],e.$watch("$ctrl.annual",function(){a.cycle.selected={value:a.annual&&a.cycle[0].value||a.cycle[3].value}}),a.submit=function(){a.fromto=a.to>a.from,a.annual?a.fromto=!0:"",a.fromto&&t.packageplan.add({title:a.serviceTitle,project:EMAPP.Project.selected._id,rent:{mode:"ARER",price:parseInt(a.price),freq:a.unit.selected.value},type:a.effectGenre.selected.value,strategy:[{flag:"month"!=a.cycle.selected.value?parseInt(a.cycle.selected.value):void 0,month:"month"==a.cycle.selected.value?0:void 0,day:parseInt(a.day),hour:8,minute:0,validfrom:"ONCE"!=a.cycle.selected?!a.annual&&parseInt(a.from)||void 0:void 0,validto:"ONCE"!=a.cycle.selected?!a.annual&&parseInt(a.to)||void 0:void 0}]},function(){l.go("admin.billingservice.dailyinfo")})}}]});