<style>.list-group-month {
        position: relative;
        overflow: hidden;
        width: 100%;
        height: 142px;
        border-radius: 2px;
    }

    .list-group.list-group-month {
        border: 1px solid #F5F5F5;
        background-color: #F5F5F5;
    }

    .list-group-month .list-group-item {
        height: 36px;
        line-height: 22px;
        border-top-color: #FFF;
        border-right-color: transparent;
        border-bottom-color: transparent;
        border-left-color: transparent;
        background-color: transparent;
    }

    .list-group-month .list-group-item:hover {
        background-color: #FFF;
    }

    .list-group-month .list-group-item:first-child {
        border-top: 0;
    }

    .list-group-month .list-group-item:first-child,
    .list-group-month .list-group-item:last-child {
        border-radius: 0;
    }</style><div class="panel" ng-if="self.projects.length>1"><div class="panel-body form-horizontal row"><label class="col-xs-2 control-label h4 mt0">我的项目：</label><div class="col-xs-4"><ui-select style="width:225px" ng-model="self.projects.selected" remove-selected="false" on-select="self.projects.select()"><ui-select-match placeholder="--选择项目--">{{$select.selected.title}}</ui-select-match><ui-select-choices repeat="item._id as item in self.projects | filter: $select.search"><div ng-bind-html="item.title | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="col-xs-6"><div class="input-group w150 toggle-active pull-right"><span class="input-group-addon"><i class="fa fa-calendar"></i></span> <input type="text" class="form-control" ng-model="self.viewDate" datetimepicker="{format:self.format}"></div></div></div></div><div class="panel"><div class="panel-body"><div class="row"><div class="col-xs-5 col-xs-offset-1"><div class="h4 mt0 pt0">账户余额</div><div class="inline pt30 pl30 text-danger"><span class="h2 no-margin">{{self.accountbalance.total||'0.00'}}</span> 元<div class="mt15 text-center"><a ui-sref="admin.property.withdraw({projectid:self.projects.selected})" class="btn btn-warning btn-outline" style="background-color:#fff6d9"><b>申请提现</b></a></div></div></div><div class="col-xs-5"><div class="pull-right w300"><div class="h4 mt0 pt0">提款账户</div><div ng-if="self.cardInfo&&self.cardInfo.account" class="panel panel-default bordered mb0" style="border-radius:6px;background-color:#f9fbff"><div class="panel-heading pl10 pt5 pr10 pb5" style="border-radius:6px 6px 0 0;background-color:#edf1f6"><i class="emfinance text-danger" style="font-size:16px" ng-class="'finance-'+self.cardInfo.type"></i> <b ng-bind="self.cardInfo.origin"></b><div class="pull-right mt2">尾号：{{self.cardInfo.tail}}</div></div><div class="panel-body p30 text-center" ng-bind="self.cardInfo.name"></div><div class="panel-footer pl10 pt5 pr10 pb5" style="border-radius:0 0 6px 6px"><span ng-if="self.cardInfo.status==='SUCCESS'">开通时间：{{self.cardInfo.timeenable||self.cardInfo.timecreate}}</span> <span ng-if="self.cardInfo.status==='CHECKING'"><i class="fa fa-coffee text-warning" style="font-size:16px"></i> 审核中...</span> <span ng-if="self.cardInfo.status==='FAILED'" uib-tooltip-html="'原因：'+self.cardInfo.reason+'（'+(self.cardInfo.timeenable||self.cardInfo.timecreate)+'）'"><i class="fa fa-warning text-danger" style="font-size:16px"></i> 审核失败 <i class="fa fa-question text-primary"></i></span><div class="pull-right"><a href="javascript:void(0)" class="text-primary" ng-click="self.getCard(self.cardInfo)">编辑</a> <a href="javascript:void(0)" class="text-primary" ng-click="self.removeCard(self.cardInfo)">删除</a></div></div></div><a ng-if="self.cardInfo&&!self.cardInfo.account" class="block bordered text-center text-primary p15" style="min-height:147px;border-radius:6px;background-color:#f9fbff" href="javascript:void(0)" ng-click="self.getCard()"><i class="fa fa-plus mt30" style="font-size:32px"></i> <span class="block mt5">添加银行卡</span></a></div></div></div></div></div><div class="panel panel-default"><div class="panel-body"><div class="row"><div class="col-xs-3"><div class="h4 mt0 pt0 bb pb5 clearfix">本月收入 <a class="pull-right" ui-sref="admin.property.record({tab:'in',projectid:self.projects.selected})"><span class="text-primary" ng-bind="self.fundflowstatistic.earning.sum||0"></span> <small><span class="text-primary">元</span></small></a></div><div class="list-group list-group-month mb0" perfect-scrollbar="self.fundflowstatistic.earning.category.length>4"><a href="javascript:void(0)" class="list-group-item p10 pt5 pb5" ng-repeat="item in self.fundflowstatistic.earning.category" ui-sref="admin.property.record({tab:'in',projectid:self.projects.selected,category:item.category})"><i ng-class="self.category[item.category].icon"></i> {{item.name}} <span class="pull-right text-primary">{{item.amount}} <small>元</small></span></a></div></div><div class="col-xs-3"><div class="h4 mt0 pt0 bb pb5 clearfix">本月支出 <a class="pull-right" ui-sref="admin.property.record({tab:'out',projectid:self.projects.selected})"><span class="text-primary" ng-bind="self.fundflowstatistic.expenses.sum||0"></span> <small><span class="text-primary">元</span></small></a></div><div class="list-group list-group-month mb0" perfect-scrollbar="self.fundflowstatistic.expenses.category.length>4"><a class="list-group-item p10 pt5 pb5" ng-repeat="item in self.fundflowstatistic.expenses.category" ui-sref="admin.property.record({tab:'out',projectid:self.projects.selected,category:item.category})"><i ng-class="self.category[item.category].icon"></i> {{item.name}} <span class="pull-right text-primary">{{item.amount}} <small>元</small></span></a></div></div><div class="col-xs-3"><div class="h4 mt0 pt0 bb pb5 clearfix">本月消耗 <a class="pull-right" target="_blank" ng-href="{{'http://cloudenergy.me/dashboard'+self.projects.selected+'/statistic/'}}"><span class="text-primary" ng-bind="self.fundflowstatistic.consumption.sum||0"></span> <small><span class="text-primary">元</span></small></a></div><div class="list-group list-group-month mb0" perfect-scrollbar="self.fundflowstatistic.consumption.category.length>4"><a class="list-group-item p10 pt5 pb5" ng-repeat="item in self.fundflowstatistic.consumption.category" target="_blank" ng-href="{{'http://cloudenergy.me/dashboard'+self.projects.selected+'/statistic/'}}"><i ng-class="self.deviceType[item.category].icon"></i> {{item.name}} <span class="pull-right text-primary">{{item.amount}} <small>元</small> <span class="text-muted small ml5">{{item.percent}}%</span></span></a></div></div><div class="col-xs-3"><div class="h4 mt0 pt0 bb pb5 clearfix">当前商户余额 <a class="pull-right" target="_blank" ng-href="{{'http://cloudenergy.me/dashboard'+self.projects.selected+'/financial/all'}}"><span class="text-primary" ng-bind="self.fundflowstatistic.department.balance||0"></span> <small><span class="text-primary">元</span></small></a></div><div class="list-group list-group-month mb0"><a class="list-group-item p10 pt5 pb5" target="_blank" ng-href="{{'http://cloudenergy.me/dashboard'+self.projects.selected+'/financial/deficit'}}">欠费总额 <span class="pull-right text-primary">{{self.fundflowstatistic.department.sum||0}} <small>元</small></span> </a><a class="list-group-item p10 pt5 pb5" target="_blank" ng-href="{{'http://cloudenergy.me/dashboard'+self.projects.selected+'/financial/deficit'}}">欠费商户 <span class="pull-right text-danger">{{self.fundflowstatistic.department.count||0}} <span class="pull-right small text-muted">/{{self.fundflowstatistic.department.total||0}} <small>个</small></span></span></a></div></div></div></div></div><div class="panel no-margin"><div class="panel-heading pt10 pb10 no-margin"><a class="h4 mb0" ui-sref="admin.property.record({tab:'all',projectid:self.projects.selected})">我的账单</a> <span class="text-muted small">(近期交易记录)</span> <span class="text-primary ml30"><a class="text-primary mr5" ui-sref="admin.property.record({tab:'all',projectid:self.projects.selected})">全部账单</a> | <a class="text-primary ml5 mr5" ui-sref="admin.property.statement({tab:'daily',projectid:self.projects.selected})">对账单</a> | <a class="text-primary ml5" ui-sref="admin.property.consume({projectid:self.projects.selected})">消耗明细</a></span></div><div class="panel-body pt0"><div class="relative col-xs-12 overflow-hidden no-padding" perfect-scrollbar="!!self.fundflow"><table class="table table-hover no-margin nowrap"><thead><tr><th>序号</th><th>交易金额 ¥</th><th>操作后余额 ¥</th><th>类型</th><th>对方</th><th>订单号/流水号</th><th>状态</th><th>时间</th></tr></thead><tbody><tr ng-repeat="item in self.fundflow" ng-if="$index<5" withdraw-detail="item" record-success="item" ng-class="{active:item.popup,'toggle-active':{RECHARGING:1,WITHDRAW:1}[item.category]}"><td ng-bind="$index+1"></td><td ng-class="{true:'text-success',false:'text-danger'}[item.amount>=0]" ng-bind="item.amount" style="font-size:16px"></td><td ng-bind="item.balance||'-'"></td><td ng-bind="self.category[item.category].title"></td><td><div>{{item.channelaccount.name}}</div><div>尾号：{{item.channelaccount.tail||'-'}}</div></td><td><div>订单号：{{item.orderno||'-'}}</div><div>流水号：{{item.id||'-'}}</div></td><td ng-bind="item.status |tradeStatus : 'title'" class="text-{{item.status | tradeStatus : 'class'}}"></td><td ng-bind="item.timepaid||item.timecheck||item.timecreate"></td></tr></tbody></table></div><div class="text-info text-center pt10 bt" ng-if="self.fundflow.length===6"><a ui-sref="admin.property.record({tab:'all',projectid:self.projects.selected})"><b>查看更多记录</b></a></div></div></div><script type="text/ng-template" id="modal-property-card.html"><form name="cardForm" novalidate ng-submit="cardForm.$valid&&self.submit()">
        <div class="modal-header bg-primary">
            <h4 class="modal-title text-center">{{ {true:'编辑银行卡',false:'添加银行卡'}[!!self.card.id] }}</h4>
        </div>
        <div class="modal-body">
            <div class="form-horizontal">
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$error.required,'has-success':(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$valid}">
                    <label class="col-sm-2 control-label">账户名称</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="name" ng-model="self.card.name" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$error.required,'has-success':(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$valid}">
                    <label class="col-sm-2 control-label">银行卡号</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="account" ng-model="self.card.account" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$error.required,'has-success':(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$valid}">
                    <label class="col-sm-2 control-label">开户银行</label>
                    <div class="col-sm-10">
                        <ui-select ng-model="self.card.origin" remove-selected="false" name="origin" required>
                            <ui-select-match placeholder="--选择银行--">{{$select.selected.title}}</ui-select-match>
                            <ui-select-choices repeat="item.id as item in self.bankData | filter: $select.search">
                                <div ng-bind-html="item.title | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                        <!--<input type="text" class="form-control" name="origin" ng-model="self.card.origin" maxlength="50" required>-->
                        <span ng-if="(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$error.required,'has-success':(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$valid}">
                    <label class="col-sm-2 control-label">支行名称</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="subbranch" ng-model="self.card.subbranch" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">账户归属</label>
                    <div class="col-sm-10">
                        <div class="form-inline" distpicker="self.card.locate">
                            <select class="form-control" ng-model="self.card.locate.province" distpicker-province></select>
                            <select class="form-control" ng-model="self.card.locate.city" distpicker-city></select>
                            <select class="form-control" ng-model="self.card.locate.district" distpicker-district></select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <span class="text-danger mr15 ng-hide" ng-show="self.bankData.length===0">无可用开户银行，请维护开户银行信息！</span>
            <button class="btn btn-primary" type="submit" ng-disabled="self.bankData.length===0">确定</button>
            <button class="btn btn-warning" type="reset" ng-click="self.cancel()">取消</button>
        </div>
    </form></script>