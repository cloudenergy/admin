"use strict";angular.module("app").constant("APICONFIG",{auth:["auth",,{login:{},logout:{}}],account:["account",,{add:{},delete:{},info:{},update:{}}],character:["character",,{add:{},delete:{},info:{},update:{}}],control:["control",,{send:{},driverinfo:{}}],collector:["collector",,{add:{},delete:{},info:{},update:{},status:{}}],driver:["driver",,{enum:{}}],business:["business",,{accountbalance:{},pltfundflow:{},fundflow:{},monitor:{},dailyfundsummary:{},monthlyfundsummary:{},ordernodetail:{},projectfundflowstatistic:{},departmentconsumptiondetail:{},departmentconsumptionstatistic:{},departmentusage:{},recentchargelog:{}}],channelaccount:["channelaccount",,{add:{},checking:{},delete:{},info:{}}],building:["building",,{add:{},delete:{},info:{},update:{}}],project:["project",,{add:{},delete:{},info:{},update:{},status:{},authorityInfo:{url:"project/authority/info"},authorityUpdate:{url:"project/authority/update"}}],withdraw:["withdraw",,{checking:{},details:{},info:{},apply:{}}],payment:["payment",,{channelinfo:{},charge:{},handlingcharge:{}}],bank:["bank",,{info:{}}],customer:["customer",,{info:{},update:{}}],sensor:["sensor",,{info:{}}],sensorchannel:["sensorchannel",,{add:{},delete:{},info:{},syncdata:{},update:{}}],device:["device",,{type:{}}],department:["department",,{add:{},delete:{},info:{},reset:{},update:{}}],export:["export",,{projectflow:{},projectdailybill:{},projectdailyreceipt:{},projectmonthlybill:{},projectmonthlyreceipt:{},consumptiondetail:{},departmentsinfo:{},sensorchannel:{}}],energy:["energy",,{info:{},update:{}}],energycategory:["energycategory",,{add:{},delete:{},info:{},update:{}}],eventcategory:["eventcategory",,{add:{},delete:{}}],event:["event",,{info:{},update:{}}],billingaccount:["billingaccount",,{add:{},update:{}}],billingservice:["billingservice",,{add:{},delete:{},info:{},update:{},equipments:{}}],sensorattrib:["sensorattrib",,{info:{},update:{}}],urlpath:["urlpath",,{delete:{},info:{},update:{}}],packageplan:["packageplan",,{add:{},delete:{},info:{},update:{}}],userpackage:["userpackage",,{add:{},info:{},delete:{}}],message:["message",,{remindrecharge:{}}],apptemplate:["apptemplate",,{info:{},update:{},delete:{}}]}).config(["$httpProvider",function(e){e.interceptors.push(["$rootScope","$q","$location","$timeout",function(e,t,a,n){function r(t,a){a?(angular.isObject(t.params)&&(t._inprogress=t.params._inprogress,delete t.params._inprogress),angular.isObject(t.data)&&angular.isUndefined(t._inprogress)&&(t._inprogress=t.data._inprogress,delete t.data._inprogress),t._inprogress!==!1&&(t._inprogress=n(function(){e.HttpInProgress++,t._inprogress=e.HttpInProgress},60))):(t._inprogress!==!1&&(angular.isNumber(t._inprogress)?n(function(){e.HttpInProgress--},60):angular.isObject(t._inprogress)&&n.cancel(t._inprogress)),delete t._inprogress)}return e.HttpInProgress=0,{request:function(e){return r(e,!0),e},requestError:function(e){return t.reject(e)},response:function(e){return r(e.config,!1),angular.isObject(e.data)&&(e.data.code||angular.isObject(e.data.result)&&!Object.keys(e.data.result).length)?(/90000005|90000007/.test(e.data.code)&&a.url("/admin/login").replace(),t.reject(e.data)):e},responseError:function(e){return r(e.config,!1),t.reject(e.data||{code:e.status})}}}])}]).service("$api",["$rootScope","$resource","APICONFIG",function(e,t,a){var n=function(e,t){return/(^http:\/\/)|(^https:\/\/)/.test(e)&&e||[/^admin\./.test(location.host)?"https://api.cloudenergy.me":"https://preapi.cloudenergy.me","/api/"+e,t&&"/:_api_action"||""].join("")},r=[];e.$on("$stateChangeStart",function(){angular.forEach(r,function(e){!e.$resolved&&e.$cancelRequest()}),r=[]}),angular.forEach(a,function(e,a){angular.isArray(e)&&e[0]&&(e[0]=n(e[0],!!e[2]),e[3]=angular.extend({cancellable:!0},e[3]),angular.forEach(e[2],function(e,t){angular.extend(e,{url:e.url&&n(e.url)||void 0,method:e.method||"POST",withCredentials:!0,params:angular.extend(e.url&&{}||{_api_action:t},e.params)})}),angular.forEach(this[a]=t.apply(t,e),function(e,t){this[t]=function(){var t,a;return angular.isObject(arguments[0])&&angular.isDefined(arguments[0]._cancellable)&&(a=arguments[0]._cancellable,delete arguments[0]._cancellable),angular.isObject(arguments[1])&&angular.isDefined(arguments[1]._cancellable)&&(a=arguments[1]._cancellable,delete arguments[1]._cancellable),t=e.apply(this,arguments),a===!1&&delete t.$cancelRequest,t.$cancelRequest&&r.push(t),t}},this[a]))},this)}]);