EMAPP.register.controller("admin.controller",["$scope","$q","$state","SettingMenu",function(e,t,o,n){var a=this,r={dashboard:"home",character:"user",project:"archive",account:"briefcase",billingservice:"calculator",urlpath:"compass",building:"building",department:"diamond",customer:"yen",eventcategory:"envelope",energycategory:"database",energy:"fire",sensor:"dashboard",collector:"tasks",driver:"wrench",appidsecret:"eye",device:"plug",finance:"dollar",property:"dollar"},c=t.defer(),l=[];a.layoutLoaded={},e.$on("$includeContentRequested",function(e,o){/^templates\/common/.test(o)&&(a.layoutLoaded[o]=t.defer(),l.push(a.layoutLoaded[o].promise))}),e.$on("$includeContentLoaded",function(e,t){/^templates\/common/.test(t)&&a.layoutLoaded[t]&&a.layoutLoaded[t].resolve()}),t.all(l.concat([c.promise])).then(function(){a.layoutLoaded=!0}),n(function(e){c.resolve(),angular.forEach(a.menu=e,function(e){e.prefix=/^(\w+\.\w+)?/.exec(e.state)[0]||"",e.icon=r[e.state.split(".")[1]]||"circle"}),a.menu.active=function(e){return/(\w+\.\w+)?/.exec(e)[0]===/(\w+\.\w+)?/.exec(o.$current.name)[0]}})}]);