EMAPP.register.controller("appidsecretcreate",["$scope","$location","$cookies","SettingMenu","Account","AppIDSecret","API","Auth","UI","Character",function(e,r,c,a,t,o,p,s,i,n){s.Check(function(){a(function(r){e.menu=r}),e.submit=function(c){e.appidsecret={appid:e.appid,appsecret:e.appsecret,character:e.character._id},console.log(e.appidsecret),p.Query(o.add,e.appidsecret,function(e){console.log(e),e.code?i.AlertError(e.message):r.path("/admin/appidsecret/info")})},p.Query(o.apply,{appid:e.appid},function(r){console.log(r),r.code?i.AlertError(r.message):(e.appsecret=r.result.appsecret,e.appid=r.result.appid)}),p.Query(t.info,{id:c.user},function(r){if(r.code)i.AlertError(result.message);else{e.adminUser=r.result;var c=e.adminUser.character&&e.adminUser.character.level;p.Query(n.info,{power:c},function(r){r.code?i.AlertError(r.message):(e.characters=r.result,e.character=e.characters[e.characters.length-1])})}})})}]);