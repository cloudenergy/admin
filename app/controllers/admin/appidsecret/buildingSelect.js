EMAPP.register.controller("BuildingSelect",["$scope","$modalInstance","API","Building","ProjectID","BuildingIDs","Config",function(i,n,e,l,t,c,u){var s;i.Ok=function(){var e=[],l=[];_.each(i.viewOfBuildings,function(i){i.isEnable?e.push(i._id):l.push(i._id)}),n.close({select:e,unselect:l})},i.Cancel=function(){n.dismiss("cancel")},i.SwitchBuilding=function(i,n){i.preventDefault(),n.isEnable?n.isEnable=!1:n.isEnable=!0},i.onSearchProject=function(n){n.preventDefault(),i.UpdateViewOfBuildings(i.buildingSearchKey)},i.UpdateViewOfBuildings=function(n){i.viewOfBuildings=[],n?_.each(s,function(e){e.title.match(n)&&i.viewOfBuildings.push(e)}):i.viewOfBuildings=s,_.each(i.viewOfBuildings,function(i){_.contains(c,i._id)?i.isEnable=!0:i.isEnable=!1})},e.Query(l.info,{project:t},function(n){n.err||(s=n.result,i.UpdateViewOfBuildings())})}]);