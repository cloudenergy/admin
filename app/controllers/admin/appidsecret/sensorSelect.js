EMAPP.register.controller("SensorSelect",["$scope","$modalInstance","API","Sensor","ProjectID","SensorIDs","Config",function(e,n,s,i,o,t,c){var r;e.Ok=function(){var s=[],i=[];_.each(e.viewOfSensors,function(e){e.isEnable?s.push(e._id):i.push(e._id)}),n.close({select:s,unselect:i})},e.Cancel=function(){n.dismiss("cancel")},e.SwitchSensor=function(e,n){e.preventDefault(),n.isEnable?n.isEnable=!1:n.isEnable=!0},e.onSearchSensor=function(n){n.preventDefault(),e.UpdateViewOfSensors(e.sensorSearchKey)},e.UpdateViewOfSensors=function(n){e.viewOfSensors=[],n?_.each(r,function(s){s.title.match(n)&&e.viewOfSensors.push(s)}):e.viewOfSensors=r,_.each(e.viewOfSensors,function(e){_.contains(t,e._id)?e.isEnable=!0:e.isEnable=!1})},s.Query(i.info,{project:o},function(n){n.err||(r=n.result,e.UpdateViewOfSensors())})}]);