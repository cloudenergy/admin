EMAPP.register.controller("ProjectSelect",["$scope","$modalInstance","Projects","ProjectIDs","Config",function(e,c,t,n,o){e.Ok=function(){var t=[];_.each(e.viewOfProjects,function(e){e.isEnable&&t.push(e)}),c.close(t)},e.Cancel=function(){c.dismiss("cancel")},e.SwitchProject=function(e,c){e.preventDefault(),c.isEnable?c.isEnable=!1:c.isEnable=!0},e.onSearchProject=function(c){c.preventDefault(),e.UpdateViewOfProject(e.projectSearchKey)},e.UpdateViewOfProject=function(c){e.viewOfProjects=[],c?_.each(t,function(t){t.title.match(c)&&e.viewOfProjects.push(t)}):e.viewOfProjects=_.union(e.viewOfProjects,t),_.each(e.viewOfProjects,function(e){e.isEnable=_.contains(n,e._id)})},e.UpdateViewOfProject()}]);