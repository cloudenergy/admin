angular.module("app").controller("SensorSelect",["$scope","$rootScope","$uibModalInstance","API","Sensor","ProjectID","Config","DeviceType",function(e,n,i,r,o,s,c,t){var a;e.currentPage=1,e.Ok=function(){var n=!0;_.each(e.viewOfSensors,function(e){if(e.originEnable!=e.isEnable)if(e.isEnable&&e.devicetype!=t){n=!1;var s={_id:e._id,devicetype:t};r.Query(o.update,s,function(e){e.err||i.close({})})}else{var s={_id:e._id,devicetype:t};r.Query(o.update,s,function(e){e.err||i.close({})})}}),n&&i.close({})},e.Cancel=function(){i.dismiss("cancel")},e.SwitchSensor=function(e,n){e.preventDefault(),n.isEnable?n.isEnable=!1:n.isEnable=!0},e.onSearchSensor=function(n){n.preventDefault(),e.UpdateViewOfSensors(e.sensorSearchKey)},e.OnSelectAll=function(i){i.preventDefault();for(var r=(e.currentPage-1)*n.popPageSize,o=e.currentPage*n.popPageSize,s=r;o>s;s++)e.viewOfSensors[s].isEnable=!0},e.UpdateViewOfSensors=function(n){e.viewOfSensors=[],n?_.each(a,function(i){i.title.match(n)?e.viewOfSensors.push(i):i.channel&&i.channel.match(n)?e.viewOfSensors.push(i):i.energyTitle&&i.energyTitle.match(n)&&e.viewOfSensors.push(i)}):e.viewOfSensors=a,_.each(e.viewOfSensors,function(e){e.originEnable=e.devicetype==t,e.isEnable=e.originEnable})},r.Query(o.channelinfo,{project:s},function(n){n.err||(a=n.result,e.UpdateViewOfSensors())})}]);
//# sourceMappingURL=sensorSelect.min.js.map
