angular.module("app").controller("CollectorCreate",["$scope","$location","SettingMenu","Collector","Project","API","Auth","$stateParams","UI",function(o,r,t,e,c,n,l,a,i){l.Check(function(){function t(o){i.AlertError(o.data.message)}o.submit=function(){var c=angular.copy(o.collector);c.project=c.project._id,n.Query(e.add,c,function(o){o.code?i.AlertWarning(o.message):r.path("/admin/collector/info")},t)};a.project;o.isEdit=!1,n.Query(c.info,function(r){r.err||(o.projects=angular.isArray(r.result)?r.result:[r.result],o.collector=o.collector||{},o.collector.project=_.find(o.projects,function(o){return o._id==a.project}))})})}]);