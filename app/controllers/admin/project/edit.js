angular.module("app").controller("projectEdit",["$rootScope","$scope","$stateParams","$location","SettingMenu","Project","Auth","API","UI",function(t,o,e,r,u,n,a,f,c){a.Check(function(){function t(t){c.AlertError(t.data.message)}u(function(t){o.menu=t}),o.Save=function(t){o.project.onduty=o.onDutyHour+":"+o.onDutyMinute,o.project.offduty=o.offDutyHour+":"+o.offDutyMinute,f.Query(n.update,o.project,function(t){t.code?c.AlertError(t.message):(c.AlertSuccess("修改成功"),r.path("/admin/project/info"))},function(t){c.AlertError(t.data.message)})},f.Query(n.info,{id:e.id},function(t){if(t.err)c.AlertError(t.data.message);else{o.project=t.result;var e=moment(o.project.onduty,"H:mm");o.onDutyHour=e.format("H"),o.onDutyMinute=e.format("mm");var r=moment(o.project.offduty,"H:mm");o.offDutyHour=r.format("H"),o.offDutyMinute=r.format("mm")}},t)})}]);