angular.module("app").controller("Buildingedit",["$scope","$stateParams","$location","Building","Auth","API","Project","UI",function(i,n,t,u,o,e,r,a){o.Check(function(){function o(i){a.AlertError(i.data.message)}i.submit=function(n){i.building.project=i.building.project._id,e.Query(u.update,i.building,function(i){i.code?a.AlertError(i.message):(t.path("/admin/building/info"),a.AlertSuccess("保存成功"))},function(i){a.AlertError(i.data.message)})},e.Query(u.info,{id:n.id},function(n){n.err||(i.building=n.result,e.Query(r.info,function(n){n.err||(i.projects=angular.isArray(n.result)?n.result:[n.result],i.building.project=_.find(i.projects,function(n){return n._id==i.building.project._id}))}))},o),i.avgConsumptionChange=function(){i.building.totalConsumption=i.building.acreage*i.building.avgConsumption},i.totalConsumptionChange=function(){i.building.avgConsumption=i.building.totalConsumption/i.building.acreage}})}]);
//# sourceMappingURL=edit.min.js.map
