angular.module("app").controller("Buildingcreate",["$scope","$location","$stateParams","SettingMenu","Building","Auth","API","Project","UI",function(n,t,i,e,o,u,r,c,a){u.Check(function(){e(function(t){n.menu=t}),n.submit=function(i){n.projects.selected=n.projects.selected._id,r.Query(o.add,n.building,function(n){n.code?a.AlertError(n.message):(t.path("/admin/building/info"),a.AlertSuccess("保存成功"))},function(n){a.AlertError(n.data.message)})};i.project;r.Query(c.info,function(t){t.err||(n.projects=angular.isArray(t.result)?t.result:[t.result],n.building=n.building||{},n.projects.selected=_.find(n.projects,function(n){return n._id==i.project}))}),n.avgConsumptionChange=function(){n.building.totalConsumption=n.building.acreage*n.building.avgConsumption},n.totalConsumptionChange=function(){n.building.avgConsumption=n.building.totalConsumption/n.building.acreage}})}]);
//# sourceMappingURL=create.min.js.map
