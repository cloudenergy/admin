angular.module("app").controller("BuildingInfo",["$scope","SettingMenu","Building","API","Auth","Project","UI",function(e,t,n,i,o,r,u){e.operateStatus={create:{isEnable:!1,url:"/create"},"delete":{isEnable:!1,url:"/delete"},edit:{isEnable:!1,url:"/edit"}},e.askingRemoveID=void 0;var l="building.project";o.Check(e.operateStatus,function(){function o(t){i.Query(n.info,{project:t},function(t){t.err||(e.buildings=t.result,console.log(e.buildings))})}function c(e){u.AlertError(e.data.message)}t(function(t){e.menu=t}),e.DoRemove=function(t,o,r){t.preventDefault(),i.Query(n["delete"],{id:o},function(t){t.code||e.buildings.splice(r,1)},c)},e.AskForRemove=function(t,n){t.preventDefault(),e.askingRemoveID=n},e.CancelRemove=function(t,n){t.preventDefault(),e.askingRemoveID=void 0},i.Query(r.info,function(t){if(t.err);else{e.projects=angular.isArray(t.result)?t.result:[t.result],e.projects.length>0&&(e.projects.title=e.projects[0]._id);var n=u.GetPageItem(l);n?(n=_.find(e.projects,function(e){return e._id==n}),e.projects.title=n._id):e.projects.length>0&&(e.projects.title=e.projects[0]._id)}}),e.$watch("projects.title",function(e){e&&(u.PutPageItem(l,e),o(e))})})}]);
//# sourceMappingURL=info.min.js.map
