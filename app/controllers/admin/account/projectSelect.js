angular.module("app").controller("ProjectSelect",["$scope","$modalInstance","Projects","ProjectIDs","Config",function(e,c,t,i,n){e.Ok=function(){var t;e.viewOfProjects[0].isEnable?t=e.viewOfProjects[0]._id:(t=[],_.each(e.viewOfProjects,function(e){e.isEnable&&t.push(e)})),c.close(t)},e.Cancel=function(){c.dismiss("cancel")},e.SwitchProject=function(c,t){c.preventDefault(),"*"==t._id?(_.each(e.viewOfProjects,function(e){e.isEnable=!1}),t.isEnable=!t.isEnable):(e.viewOfProjects[0].isEnable=!1,t.isEnable=!t.isEnable)},e.onSearchProject=function(c){c.preventDefault(),e.UpdateViewOfProject(e.projectSearchKey)},e.UpdateViewOfProject=function(c){e.viewOfProjects=[{_id:"*",title:"所有权限"}],c?_.each(t,function(t){t.title.match(c)&&e.viewOfProjects.push(t)}):e.viewOfProjects=_.union(e.viewOfProjects,t),console.log(e.viewOfProjects),i&&i.length&&_.each(e.viewOfProjects,function(e){e.isEnable=_.contains(i,e._id)})},e.UpdateViewOfProject()}]);