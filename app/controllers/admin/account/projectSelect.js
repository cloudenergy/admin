EMAPP.register.controller("ProjectSelect",["$scope","$modalInstance","Projects","ProjectIDs","Config",function(e,t,c,i,n){e.Ok=function(){var c;e.viewOfProjects[0].isEnable?c=e.viewOfProjects[0]._id:(c=[],_.each(e.viewOfProjects,function(e){e.isEnable&&c.push(e)})),t.close(c)},e.Cancel=function(){t.dismiss("cancel")},e.SwitchProject=function(t,c){t.preventDefault(),"*"==c._id?(_.each(e.viewOfProjects,function(e){e.isEnable=!1}),c.isEnable=!c.isEnable):(e.viewOfProjects[0].isEnable=!1,c.isEnable=!c.isEnable)},e.onSearchProject=function(t){t.preventDefault(),e.UpdateViewOfProject(e.projectSearchKey)},e.UpdateViewOfProject=function(t){e.viewOfProjects=[{_id:"*",title:"所有权限"}],t?_.each(c,function(c){c.title.match(t)&&e.viewOfProjects.push(c)}):e.viewOfProjects=_.union(e.viewOfProjects,c),console.log(e.viewOfProjects),i&&i.length&&_.each(e.viewOfProjects,function(e){e.isEnable=_.contains(i,e._id)})},e.UpdateViewOfProject()}]);