angular.module("app").controller("BillingServiceadd",["Config","$scope","$q","$location","$cookies","BillingService","Energycategory","$stateParams","SettingMenu","BillingAccount","Account","md5","API","Auth","UI",function(e,n,r,t,c,o,i,a,l,u,s,g,y,f,p){f.Check(function(){l(function(e){n.menu=e}),n.submit=function(e){var r=new Array;if(_.each(n.energycategory,function(e){e.isEnable&&r.push(e._id)}),!a.project)return void console.log("parameter project is emtpy, please check");var c={title:n.serviceTitle,energycategory:r,project:a.project};y.Query(o.add,c,function(e){e.code?p.AlertError(e.message):(t.path("/admin/billingservice/info"),p.AlertSuccess("保存成功"))})},y.Query(i.info,{},function(e){console.log(e.result),n.energycategory=new Array,_.each(e.result,function(e){n.energycategory.push(e)})}),n.SwitchEnergycategory=function(e,n){e.preventDefault(),n.isEnable?n.isEnable=!1:n.isEnable=!0}})}]);