angular.module("app").controller("characterInfo",["$rootScope","$scope","API","Auth","$cookies","UI","Character","Config",function(e,a,r,t,c,n,l,o){a.operateStatus={manage:{isEnable:!1,url:"/manage"},"delete":{isEnable:!1,url:"/delete"}},a.askingRemoveID=void 0,a.MaxLevel=0,t.Check(a.operateStatus,function(){function e(e){n.AlertError(e.data.message)}r.Query(l.info,{},function(e){e.err||(a.characters=e.result,console.log(a.characters),a.MaxLevel=a.characters.length-1)}),a.DoRemove=function(t,c,o){t.preventDefault();var u=n.GetAbsoluteIndex(a.currentPage,o);r.Query(l["delete"],{id:c},function(e){a.characters.splice(u,1)},e)},a.AskForRemove=function(e,r){e.preventDefault(),a.askingRemoveID=r},a.CancelRemove=function(e,r){e.preventDefault(),a.askingRemoveID=void 0},a.$watch("currentPage",function(e){return e?void n.PutPageIndex(void 0,a.currentPage):void(a.currentPage=n.GetPageIndex())}),a.onLevelUp=function(e,t,c){e.preventDefault();var n=a.characters[c-1];a.characters[c-1].level++,a.characters[c].level--,a.characters[c-1]=a.characters[c],a.characters[c]=n,r.Query(l.update,{_id:a.characters[c]._id,level:a.characters[c].level},function(e){}),r.Query(l.update,{_id:a.characters[c-1]._id,level:a.characters[c-1].level},function(e){})},a.onLevelDown=function(e,t,c){e.preventDefault();var n=a.characters[c+1];a.characters[c+1].level--,a.characters[c].level++,a.characters[c+1]=a.characters[c],a.characters[c]=n,r.Query(l.update,{_id:a.characters[c]._id,level:a.characters[c].level},function(e){}),r.Query(l.update,{_id:a.characters[c+1]._id,level:a.characters[c+1].level},function(e){})},a.adminUser=c.user})}]);
//# sourceMappingURL=info.min.js.map
