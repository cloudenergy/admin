angular.module("app").controller("characterInfo",["$rootScope","$scope","SettingMenu","API","Auth","$cookies","UI","Character","Config",function(e,a,r,t,c,n,l,o,u){a.operateStatus={manage:{isEnable:!1,url:"/manage"},"delete":{isEnable:!1,url:"/delete"}},a.askingRemoveID=void 0,a.MaxLevel=0,c.Check(a.operateStatus,function(){function e(e){l.AlertError(e.data.message)}r(function(e){a.menu=e}),t.Query(o.info,{},function(e){e.err||(a.characters=e.result,console.log(a.characters),a.MaxLevel=a.characters.length-1)}),a.DoRemove=function(r,c,n){r.preventDefault();var u=l.GetAbsoluteIndex(a.currentPage,n);t.Query(o["delete"],{id:c},function(e){a.characters.splice(u,1)},e)},a.AskForRemove=function(e,r){e.preventDefault(),a.askingRemoveID=r},a.CancelRemove=function(e,r){e.preventDefault(),a.askingRemoveID=void 0},a.$watch("currentPage",function(e){return e?void l.PutPageIndex(void 0,a.currentPage):void(a.currentPage=l.GetPageIndex())}),a.onLevelUp=function(e,r,c){e.preventDefault();var n=a.characters[c-1];a.characters[c-1].level++,a.characters[c].level--,a.characters[c-1]=a.characters[c],a.characters[c]=n,t.Query(o.update,{_id:a.characters[c]._id,level:a.characters[c].level},function(e){}),t.Query(o.update,{_id:a.characters[c-1]._id,level:a.characters[c-1].level},function(e){})},a.onLevelDown=function(e,r,c){e.preventDefault();var n=a.characters[c+1];a.characters[c+1].level--,a.characters[c].level++,a.characters[c+1]=a.characters[c],a.characters[c]=n,t.Query(o.update,{_id:a.characters[c]._id,level:a.characters[c].level},function(e){}),t.Query(o.update,{_id:a.characters[c+1]._id,level:a.characters[c+1].level},function(e){})},a.adminUser=n.user})}]);
//# sourceMappingURL=info.min.js.map
