angular.module("app").controller("eventcategoryIndex",["$rootScope","$scope","SettingMenu","Eventcategory","API","Auth","UI","$q","Project",function(e,t,a,n,r,o,u,c,l){t.gateways={SMS:"短信通知",APP:"Web，APP通知",EMAIL:"邮件通知",WECHAT:"微信通知"},t.isGatewayOn=function(e,t){return-1!=e.enablegateway.indexOf(t)},t.updateGateway=function(e,a,o){var u=e.enablegateway.indexOf(a);o.target.checked&&-1==u?e.enablegateway.push(a):e.enablegateway.splice(u,1);var c={templateid:e.id,gateway:e.enablegateway,project:t.projects.selected._id};r.Query(n.update,c,function(e){})},t.operateStatus={add:{isEnable:!1,url:"/add"},"delete":{isEnable:!1,url:"/delete"},update:{isEnable:!1,url:"/update"}},t.askingRemoveID=void 0,o.Check(t.operateStatus,function(){function e(e){u.AlertError(e.data.message)}r.Query(l.info,function(e){e.err||(t.projects=angular.isArray(e.result)?e.result:[e.result],t.projects.selected=t.projects.length?t.projects[0]:null)}),t.$watch("projects.selected",function(e){e&&r.Query(n.info,{project:e._id},function(e){e.err||(t.Eventcategory=e.result)})}),t.DoRemove=function(a,o,u){a.preventDefault();var c=u;r.Query(n["delete"],{id:o},function(e){t.Eventcategory.splice(c,1)},e)},t.AskForRemove=function(e,a){e.preventDefault(),t.askingRemoveID=a},t.CancelRemove=function(e,a){e.preventDefault(),t.askingRemoveID=void 0}})}]);
//# sourceMappingURL=info.min.js.map
