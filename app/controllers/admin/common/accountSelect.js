EMAPP.register.controller("AccountSelect",["$scope","$rootScope","$uibModalInstance","API","Account","SelectedAccounts",function(e,n,c,i,t,a){var o;e.currentPage=1,e.Ok=function(){var n;n=_.isArray(a)?[]:null;var i=!0;_.each(e.viewOfAccounts,function(e){e.isEnable&&(i=!1,_.isArray(n)?n.push(e):n=e)}),i?e.Cancel():c.close(n)},e.Cancel=function(){c.dismiss("cancel")},e.Switch=function(n,c){n.preventDefault(),_.isArray(a)?c.isEnable=!c.isEnable:(_.each(e.viewOfAccounts,function(e){e._id!=c._id&&(e.isEnable=!1)}),c.isEnable=!0)},e.onSearch=function(n){n.preventDefault(),e.UpdateView(e.searchKey)},e.OnSelectAll=function(c){c.preventDefault();for(var i=(e.currentPage-1)*n.popPageSize,t=e.currentPage*n.popPageSize,a=i;t>a;a++)e.viewOfAccounts[a].isEnable=!0},e.UpdateView=function(n){e.viewOfAccounts=[],n?_.each(o,function(c){var i=new RegExp(n,"g");c._id.match(i)&&e.viewOfAccounts.push(c)}):e.viewOfAccounts=o,_.each(e.viewOfAccounts,function(e){_.isArray(a)?e.isEnable=_.find(a,function(n){return _.isObject(n)?n._id==e._id:n==e._id}):e.isEnable=e._id==a})},i.Query(t.info,{},function(n){n.err||(o=n.result,e.UpdateView())})}]);