angular.module("app").factory("API",function(){var n={buildingID:10,gatewayID:2,addrID:12,meterID:3,funcID:2},r=function(n){var r=n.split("|");return _.isArray(r)?r[0]||n:n},t=function(n){var r=n.split("|");return _.isArray(r)?r[r.length-1]||n:n};return{Query:function(n,r,t){return void 0==n||null==n?!1:_.isFunction(r)?(n({},r),n):(n(r,t),n)},QueryPromise:function(n,r){return void 0==n||null==n?!1:_.isFunction(r)?n({},r):n(r)},FindEnergyByPath:function(n,r,t){var i=function(n,r,t){if(r.length<=t)return n;var e=parseInt(r[t]);return n.childrens&&n.childrens.length>e?i(n.childrens[e],r,t+1):void 0},e=void 0;return _.each(n,function(n){n._id==r&&(e=i(n,t.split(","),1))}),e},FindEnergyByID:function(n,r){var t=function(n){if(n)for(var i in n){var e=n[i];if(e.id==r)return e;var u=t(e.childrens);if(u)return u}};return t(n)},FindEnergyByTitle:function(n,r){titleReg=new RegExp(r,"ig");var t=function(n){if(n)for(var i in n){var e=n[i];if(titleReg.test(e.title))return e;if(e.title==r)return e;var u=t(e.childrens);if(u)return u}};return t(n)},ParentLocation:function(n){var r=n.lastIndexOf("/");return n.substr(0,r)},RootEnergycategory:function(n){return r(n)},TailEnergycategory:function(n){return t(n)},FindSocity:function(n,r){var t=function(n){if(n)for(var i in n){var e=n[i];if(e.id==r)return e;var u=t(e.childrens);if(u)return u}};return t(n)},SensorID:function(n){return n.substr(0,n.length-2)},ParseSensorID:function(r){if(!r||!r.length)return null;var t={};return _.map(n,function(n,i){t[i]=r.substr(0,n),r=r.substr(n)}),t}}});