"use strict";angular.module("app").controller("Finance.project.list",["$filter","$api","uiGridConstants","$uibModal","$scope","$templateCache",function(e,i,t,n,l,r){var a=this;a.paneHeight=90,a.searchText="",a.filter=function(){a.gridOptions.enableFiltering=!a.gridOptions.enableFiltering,a.gridApi.core.notifyDataChange(t.dataChange.COLUMN)},a.export=function(){a.gridOptions.exporterCsvFilename="平台财务_项目列表.csv",a.gridApi.exporter.csvExport("visible","visible",angular.element(document.querySelectorAll(".subContent")))},a.list=function(){i.project.info({titlereg:a.searchText||void 0},function(e){a.gridOptions.data=angular.isArray(e.result)?e.result:[e.result],a.gridApi.grid.element.height("auto")})},a.list(),a.setPayProperty=function(e){n.open({size:"lg",templateUrl:"payproperty.html",controllerAs:"self",controller:["$api","$uibModalInstance",function(e,i){var t=this;t.showSet="baseinfo",t.ok=function(){console.log(1)},t.cancel=function(){console.log(2),i.dismiss("cancel")}}]})},a.gridOptions={onRegisterApi:function(e){a.gridApi=e},enableColumnResizing:!0,exporterOlderExcelCompatibility:!0,exporterFieldCallback:function(e,i,t,n){return 0===n?0:'="'+(n||"")+'"'},columnDefs:[{displayName:"",name:"$index",type:"number",width:50,minWidth:50,enableColumnMenu:!1,exporterSuppressExport:!0,headerCellClass:"text-center",headerCellTemplate:'<div class="ui-grid-cell-contents">序号</div>',cellClass:"text-center",cellTemplate:'<div class="ui-grid-cell-contents" ng-bind="grid.renderContainers.body.visibleRowCache.indexOf(row)+1"></div>'},{displayName:"项目名称",name:"title",width:"*",minWidth:120,enableColumnMenu:!1,cellTemplate:'<div class="ui-grid-cell-contents text-primary"><a ng-click="grid.appScope.self.setPayProperty(row.entity)" ng-bind="COL_FIELD"></a></div>'},{displayName:"项目余额 ¥",name:"billingAccount.cash",width:"*",minWidth:120,enableColumnMenu:!1},{displayName:"",name:"view",width:"*",minWidth:100,enableColumnMenu:!1,exporterSuppressExport:!0,headerCellClass:"text-center",headerCellTemplate:'<div class="ui-grid-cell-contents">查看记录</div>',cellClass:"text-center",cellTemplate:'<div class="ui-grid-cell-contents text-primary"><a ui-sref="admin.finance.project.info.record({tab:\'in\',projectid:row.entity._id})">收入记录</a><a class="ml20" ui-sref="admin.finance.project.info.record({tab:\'out\',projectid:row.entity._id})">提现记录</a></div>'},{displayName:"",name:"operation",width:"*",minWidth:220,enableColumnMenu:!1,exporterSuppressExport:!0,headerCellClass:"text-center",headerCellTemplate:'<div class="ui-grid-cell-contents">操作</div>',cellClass:"text-center",cellTemplate:'<div class="ui-grid-cell-contents text-primary"><a ui-sref="admin.finance.project.info({projectid:row.entity._id})">管理支付属性</a><a class="ml20" ui-sref="admin.finance.project.info.withdraw({projectid:row.entity._id})">转账</a></div>'}]}}]);