<div class="panel"><div class="panel-heading h4 no-margin">账户余额</div><div class="panel-body pt0"><div class="col-md-4 col-md-offset-2" style="line-height: 34px"><div class="pb15">可提现余额： <span class="text-danger h2">¥ {{self.accountbalance.cash||'0.00'}}</span></div><div class="pb15">不可用金额： <span class="h4">¥ {{self.accountbalance.frozen||'0.00'}}</span></div></div><div class="col-md-6" style="line-height: 34px"><div class="pt15"><a ui-sref="admin.finance.project.info.withdraw" class="btn btn-primary ml20">转账</a> <a ui-sref="admin.finance.project.info.record({tab:'all'})" class="btn btn-primary ml20">收支明细</a></div></div></div></div><div class="panel"><div class="panel-heading h4 no-margin">提款账户</div><div class="panel-body row pt0"><div class="col-md-offset-1 col-md-10"><div class="row"><div class="col-sm-4" ng-repeat="item in self.cardData"><div class="widget bg-primary todo round" ng-if="item.status==='SUCCESS'"><div class="todo-body text-center" style="height:120px"><div class="pt30" style="font-size:20px" ng-bind="item.account"></div></div><div class="todo-footer" style="height:40px">开通时间：{{item.timeenable*1000|date:'yyyy-M-dd H:mm:ss'}}<div class="pull-right"><a href="javascript:void(0)" ng-click="self.getCard(item)">编辑</a> <a href="javascript:void(0)" ng-click="self.removeCard(item)" class="ml5">删除</a></div></div></div><div class="widget bg-default-light todo round" ng-if="item.status==='CHECKING'"><div class="todo-body text-center" style="height:120px"><div class="pt5 pb5" style="font-size:16px" ng-bind="item.account"></div><i class="fa fa-coffee text-warning" style="font-size:36px"></i><div class="text-warning">审核中...</div></div><div class="todo-footer" style="height:40px"><div class="pull-right"><a href="javascript:void(0)" ng-click="self.removeCard(item)" class="ml5">删除</a></div></div></div><div class="widget bg-default-light todo round" ng-if="item.status==='FAILED'"><div class="todo-body text-center" style="height:160px"><div style="font-size:16px" ng-bind="item.account"></div><i class="fa fa-warning text-danger" style="font-size:20px"></i><div class="text-danger">审核失败</div><div>审核时间：{{item.timeenable*1000|date:'yyyy-M-dd H:mm:ss'}}</div><div class="pb5">失败原因：{{item.reason}}</div><a href="javascript:void(0)" ng-click="self.getCard(item)" class="mr5 text-primary">重新编辑</a> <a href="javascript:void(0)" ng-click="self.removeCard(item)" class="ml5 text-primary">删除此项</a></div></div></div><div class="col-sm-4"><div class="widget bg-default-light todo round"><div class="todo-body text-center" style="height:160px"><a class="text-primary" href="javascript:void(0)" ng-click="self.getCard()"><i class="fa fa-plus mt30" style="font-size:46px"></i> <span class="block mt5">添加银行账户</span></a></div></div></div></div></div></div></div><script type="text/ng-template" id="modal-finance-project-card.html"><form name="cardForm" novalidate ng-submit="cardForm.$valid&&self.submit()">
        <div class="modal-header bg-primary">
            <h4 class="modal-title text-center">{{ {true:'编辑银行卡',false:'添加银行卡'}[!!self.card.id] }}</h4>
        </div>
        <div class="modal-body">
            <div class="form-horizontal">
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$error.required,'has-success':(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$valid}">
                    <label class="col-sm-2 control-label">账户名称</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="name" ng-model="self.card.name" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$error.required,'has-success':(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$valid}">
                    <label class="col-sm-2 control-label">银行卡号</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="account" ng-model="self.card.account" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$error.required,'has-success':(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$valid}">
                    <label class="col-sm-2 control-label">开户银行</label>
                    <div class="col-sm-10">
                        <ui-select ng-model="self.card.origin" remove-selected="false" name="origin" required>
                            <ui-select-match placeholder="--选择银行--">{{$select.selected.title}}</ui-select-match>
                            <ui-select-choices repeat="item.id as item in self.bankData | filter: $select.search">
                                <div ng-bind-html="item.title | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                        <!--<input type="text" class="form-control" name="origin" ng-model="self.card.origin" maxlength="50" required>-->
                        <span ng-if="(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$error.required,'has-success':(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$valid}">
                    <label class="col-sm-2 control-label">支行名称</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="subbranch" ng-model="self.card.subbranch" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">账户归属</label>
                    <div class="col-sm-10">
                        <div class="form-inline" distpicker="self.card.locate">
                            <select class="form-control" ng-model="self.card.locate.province" distpicker-province></select>
                            <select class="form-control" ng-model="self.card.locate.city" distpicker-city></select>
                            <select class="form-control" ng-model="self.card.locate.district" distpicker-district></select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <span class="text-danger mr15 ng-hide" ng-show="self.bankData.length===0">无可用开户银行，请维护开户银行信息！</span>
            <button class="btn btn-primary" type="submit" ng-disabled="self.bankData.length===0">确定</button>
            <button class="btn btn-primary" type="reset" ng-click="self.cancel()">取消</button>
        </div>
    </form></script>