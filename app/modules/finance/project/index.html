<div class="panel panel-default mb0 layout-column full-height"><div class="panel-body flex-initial"><div class="alert alert-warning alert-dismissible little-alert" ng-if="self.requestWarning" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>失败:</strong> 属性未修改</div><div class="alert alert-info alert-dismissible little-alert" ng-if="self.requestSuccess" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button> <strong>成功：</strong> 属性已修改</div><form class="form-inline pb10 bb"><a class="btn btn-primary" ui-sref="admin.finance.project"><i class="glyphicon glyphicon-chevron-left"></i>项目列表</a></form></div><div class="panel-body flex overflow-auto pt0 pb0"><form class="form-horizontal" role="form" name="form" ng-submit="submit()"><fieldset><div class="col-sm-12"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.payment"> <span><i class="handle" ng-click="self.payment&&(self.prepayment=false);self.payment&&(self.thirdpartbill=false);self.payment&&(self.epayment=false);self.save('payment',!self.payment)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">是否使用支付</label></div><div class="col-sm-12"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.prepayment" ng-disabled="!self.payment"> <span><i class="handle" ng-click="self.payment&&!self.thirdpartbill&&(self.epayment=false);self.payment&&self.save('prepayment',!self.prepayment)"></i></span></label></div><label class="col-sm-1 control-label" style="text-align:left">使用预付费</label><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.thirdpartbill" ng-disabled="!self.payment"> <span><i class="handle" ng-click="self.payment&&!self.prepayment&&(self.epayment=false);self.payment&&self.save('thirdpartbill',!self.thirdpartbill)"></i></span></label></div><label class="col-sm-2 control-label" style="text-align:left">对接第三方启用账单收费</label></div><div class="col-sm-12 mt10"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.epayment" ng-disabled="!self.prepayment&&!self.thirdpartbill"> <span><i class="handle" ng-click="(self.prepayment||self.thirdpartbill)&&self.save('epayment',!self.epayment)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">使用电子支付</label></div><div class="col-sm-12 mt10" ng-if="self.epayment"><label class="col-sm-3 control-label">电子资金流向</label><div class="col-sm-2 mt8" ng-if="!self.efundflowEdit">{{self.efundflow.selected | EfundFlow}}</div><div class="col-sm-2" ng-if="self.efundflowEdit"><ui-select ng-model="self.efundflow.selected" remove-selected="false"><ui-select-match placeholder="">{{$select.selected.title}}</ui-select-match><ui-select-choices repeat="item.key as item in self.efundflow | filter: $select.search"><div ng-bind-html="item.title | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="col-sm-2 col-sm-offset-1"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.efundflowEdit" ng-click="self.efundflowEdit=!self.efundflowEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.efundflowEdit" ng-click="self.efundflowEdit=!self.efundflowEdit;self.save('efundflow',self.efundflow.selected)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.efundflowEdit" ng-click="self.efundflowEdit=!self.efundflowEdit">修改</a></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PRJ'"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.alipay.enable" ng-disabled="!self.payment"> <span><i class="handle"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">支付宝支付参数</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.alipay.enable"><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">合作者身份（PID）</label><div class="col-sm-4 mt8" ng-bind="self.alipay.pid" ng-if="!self.alipayEdit"></div><div class="col-sm-4" ng-if="self.alipayEdit"><input type="text" class="form-control" ng-model="self.alipay.pid"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">支付宝帐号</label><div class="col-sm-4 mt8" ng-bind="self.alipay.account" ng-if="!self.alipayEdit"></div><div class="col-sm-4" ng-if="self.alipayEdit"><input type="text" class="form-control" ng-model="self.alipay.account"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">安全校验码（Key）</label><div class="col-sm-4 mt8" ng-bind="self.alipay.secretkey" ng-if="!self.alipayEdit"></div><div class="col-sm-4" ng-if="self.alipayEdit"><input type="text" class="form-control" ng-model="self.alipay.secretkey"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">支付宝公钥</label><div class="col-sm-4 mt8" ng-bind="self.alipay.alipay_public" ng-if="!self.alipayEdit"></div><div class="col-sm-4" ng-if="self.alipayEdit"><input type="text" class="form-control" ng-model="self.alipay.alipay_public"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户RSA私钥</label><div class="col-sm-4 mt8" ng-bind="self.alipay.department_private" ng-if="!self.alipayEdit"></div><div class="col-sm-4" ng-if="self.alipayEdit"><input type="text" class="form-control" ng-model="self.alipay.department_private"></div></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.alipay.enable"><div class="col-sm-10 col-sm-offset-2"><span class="pull-left mt8">费率</span><div class="col-sm-1 mt8" ng-bind="self.alipay.rate" ng-if="!self.alipayEdit"></div><div class="col-sm-2" ng-if="self.alipayEdit"><input type="text" class="form-control" ng-model="self.alipay.rate"></div><div class="col-sm-3"><span class="pull-left mt8">费率承担：物业</span><div class="col-sm-6 mt8" ng-bind="self.alipay.share.PRJ" ng-if="!self.alipayEdit"></div><div class="col-sm-6" ng-if="self.alipayEdit"><input class="form-control" type="text" ng-model="self.alipay.share.PRJ"></div></div><div class="col-sm-4"><span class="pull-left mt8">商户</span><div class="col-sm-6 mt8" ng-bind="self.alipay.share.USR" ng-if="!self.alipayEdit"></div><div class="col-sm-6" ng-if="self.alipayEdit"><input class="form-control" type="text" ng-model="self.alipay.share.USR"></div></div></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.alipay.enable"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.alipayEdit" ng-click="self.alipayEdit=!self.alipayEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.alipayEdit" ng-click="self.alipayEdit=!self.alipayEdit;self.save('alipay',self.alipay)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.alipayEdit" ng-click="self.alipayEdit=!self.alipayEdit">修改</a></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PRJ'"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.wx.enable" ng-disabled="!self.payment"> <span><i class="handle"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">微信支付参数</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.wx.enable"><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">微信APPID</label><div class="col-sm-4 mt8" ng-bind="self.wx.wx_appid" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.wx_appid"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">应用密钥（APPSecret）</label><div class="col-sm-4 mt8" ng-bind="self.wx.wx_appsecret" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.wx_appsecret"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户ID</label><div class="col-sm-4 mt8" ng-bind="self.wx.merchant" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.merchant"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户支付密钥（API密钥）</label><div class="col-sm-4 mt8" ng-bind="self.wx.api_secretkey" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.api_secretkey"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户添加员工登录帐号ID</label><div class="col-sm-4 mt8" ng-bind="self.wx.staff_account" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.staff_account"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">微信客户端证书</label><div class="col-sm-4 mt8" ng-bind="self.wx.apiclient_cert" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.apiclient_cert"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">微信客户端证书密钥</label><div class="col-sm-4 mt8" ng-bind="self.wx.apiclient_key" ng-if="!self.wxEdit"></div><div class="col-sm-4" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.apiclient_key"></div></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.wx.enable"><div class="col-sm-10 col-sm-offset-2"><span class="pull-left mt8">费率</span><div class="col-sm-1 mt8" ng-bind="self.wx.rate" ng-if="!self.wxEdit"></div><div class="col-sm-2" ng-if="self.wxEdit"><input type="text" class="form-control" ng-model="self.wx.rate"></div><div class="col-sm-3"><span class="pull-left mt8">费率承担：物业</span><div class="col-sm-6 mt8" ng-bind="self.wx.share.PRJ" ng-if="!self.wxEdit"></div><div class="col-sm-6" ng-if="self.wxEdit"><input class="form-control" type="text" ng-model="self.wx.share.PRJ"></div></div><div class="col-sm-4"><span class="pull-left mt8">商户</span><div class="col-sm-6 mt8" ng-bind="self.wx.share.USR" ng-if="!self.wxEdit"></div><div class="col-sm-6" ng-if="self.wxEdit"><input class="form-control" type="text" ng-model="self.wx.share.USR"></div></div></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.wx.enable"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.wxEdit" ng-click="self.wxEdit=!self.wxEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.wxEdit" ng-click="self.wxEdit=!self.wxEdit;self.save('wx',self.wx)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.wxEdit" ng-click="self.wxEdit=!self.wxEdit">修改</a></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PRJ'"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.wx_pub.enable" ng-disabled="!self.payment"> <span><i class="handle"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">公众号支付参数</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.wx_pub.enable"><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">微信公众号APPID</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.wxp_appid" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.wxp_appid"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">应用密钥（APPSecret）</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.wxp_appsecret" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.wxp_appsecret"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户ID</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.merchant" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.merchant"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户支付密钥（API密钥）</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.api_secretkey" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.api_secretkey"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">商户添加员工登录帐号ID</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.staff_account" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.staff_account"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">微信客户端证书</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.apiclient_cert" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.apiclient_cert"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">微信客户端证书密钥</label><div class="col-sm-4 mt8" ng-bind="self.wx_pub.apiclient_key" ng-if="!self.wxpEdit"></div><div class="col-sm-4" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.apiclient_key"></div></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.wx_pub.enable"><div class="col-sm-10 col-sm-offset-2"><span class="pull-left mt8">费率</span><div class="col-sm-1 mt8" ng-bind="self.wx_pub.rate" ng-if="!self.wxpEdit"></div><div class="col-sm-2" ng-if="self.wxpEdit"><input type="text" class="form-control" ng-model="self.wx_pub.rate"></div><div class="col-sm-3"><span class="pull-left mt8">费率承担：物业</span><div class="col-sm-6 mt8" ng-bind="self.wx_pub.share.PRJ" ng-if="!self.wxpEdit"></div><div class="col-sm-6" ng-if="self.wxpEdit"><input class="form-control" type="text" ng-model="self.wx_pub.share.PRJ"></div></div><div class="col-sm-4"><span class="pull-left mt8">商户</span><div class="col-sm-6 mt8" ng-bind="self.wx_pub.share.USR" ng-if="!self.wxpEdit"></div><div class="col-sm-6" ng-if="self.wxpEdit"><input class="form-control" type="text" ng-model="self.wx_pub.share.USR"></div></div></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PRJ'&&self.wx_pub.enable"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.wxpEdit" ng-click="self.wxpEdit=!self.wxpEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.wxpEdit" ng-click="self.wxpEdit=!self.wxpEdit;self.save('wx_pub',self.wx_pub)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.wxpEdit" ng-click="self.wxpEdit=!self.wxpEdit">修改</a></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PLT'"><label class="col-sm-3 control-label">项目提现银行账户</label><div class="col-sm-5"><a class="mt10 pull-right" style="color:#09c" ng-click="self.getCard()">添加</a></div></div><div class="col-sm-12" ng-repeat="card in self.cardData" ng-if="self.epayment&&self.efundflow.selected=='PLT'"><div class="col-sm-12"><label class="col-sm-3 control-label">卡{{$index+1}}:</label></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">账户名称</label><div class="col-sm-4 mt8" ng-bind="card.name"></div></div><div class="col-sm-12 mt10"><label class="col-sm-3 control-label">银行卡号</label><div class="col-sm-4 mt8" ng-bind="card.account"></div><div class="col-sm-1"><a class="mt10 pull-right ml10" style="color:#09c" ng-click="self.removeCard(card)">删除</a><a class="mt10 pull-right" style="color:#09c" ng-click="self.getCard(card)">修改</a></div></div></div><div class="col-sm-12 mt10" ng-if="self.epayment"><label class="col-sm-3 control-label" ng-if="self.efundflow.selected=='PLT'">提现配置</label><div class="col-sm-9" ng-if="self.efundflow.selected=='PLT'"><span class="pull-left mt8">最低提现金额￥</span><div class="col-sm-2 mt8" ng-bind="self.withdraw.minwithdraw" ng-if="!self.withdrawEdit"></div><div class="col-sm-2" ng-if="self.withdrawEdit"><input type="text" class="form-control" ng-model="self.withdraw.minwithdraw"></div><div class="col-sm-3"><span class="pull-left mt8">冻结天数</span><div class="col-sm-6 mt8" ng-bind="self.withdraw.frozenday" ng-if="!self.withdrawEdit"></div><div class="col-sm-6" ng-if="self.withdrawEdit"><input class="form-control" type="text" ng-model="self.withdraw.frozenday"></div></div><div class="col-sm-4"><span class="pull-left mt8">服务费（次）￥</span><div class="col-sm-6 mt8" ng-bind="self.withdraw.servicecharge" ng-if="!self.withdrawEdit"></div><div class="col-sm-6" ng-if="self.withdrawEdit"><input class="form-control" type="text" ng-model="self.withdraw.servicecharge"></div></div></div><div class="col-sm-12" ng-if="self.efundflow.selected=='PLT'"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.withdrawEdit" ng-click="self.withdrawEdit=!self.withdrawEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.withdrawEdit" ng-click="self.withdrawEdit=!self.withdrawEdit;self.save('withdraw',self.withdraw)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.withdrawEdit" ng-click="self.withdrawEdit=!self.withdrawEdit">修改</a></div></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PLT'"><label class="col-sm-3 control-label">使用移动支付程序：</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.ZFT.enable"> <span><i class="handle" ng-click="self.save('ZFT',self.ZFT)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">租付通APP</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.EWP.enable"> <span><i class="handle" ng-click="self.save('EWP',self.EWP)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left">智慧云能源微信公众号</label></div><div class="col-sm-12 mt10" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&(self.ZFT.enable||self.EWP.enable)"><label class="col-sm-3 control-label">使用支付方式：</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.ZFT.enable"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.ZFT.wx.enable"> <span><i class="handle" ng-click="self.save('ZFT',self.ZFT)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left"><i class="iconfont icon-weixin"></i> 微信支付-租付通APP</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.ZFT.enable&&self.ZFT.wx.enable"><div class="col-sm-10 col-sm-offset-2"><span class="pull-left mt8">费率</span><div class="col-sm-1 mt8" ng-bind="self.ZFT.wx.rate" ng-if="!self.zftwxEdit"></div><div class="col-sm-2" ng-if="self.zftwxEdit"><input type="text" class="form-control" ng-model="self.ZFT.wx.rate"></div><div class="col-sm-3"><span class="pull-left mt8">费率承担：物业</span><div class="col-sm-6 mt8" ng-bind="self.ZFT.wx.share.PRJ" ng-if="!self.zftwxEdit"></div><div class="col-sm-6" ng-if="self.zftwxEdit"><input class="form-control" type="text" ng-model="self.ZFT.wx.share.PRJ"></div></div><div class="col-sm-4"><span class="pull-left mt8">商户</span><div class="col-sm-6 mt8" ng-bind="self.ZFT.wx.share.USR" ng-if="!self.zftwxEdit"></div><div class="col-sm-6" ng-if="self.zftwxEdit"><input class="form-control" type="text" ng-model="self.ZFT.wx.share.USR"></div></div></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.efundflow.selected=='PLT'&&self.ZFT.enable&&self.ZFT.wx.enable"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.zftwxEdit" ng-click="self.zftwxEdit=!self.zftwxEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.zftwxEdit" ng-click="self.zftwxEdit=!self.zftwxEdit;self.save('ZFT.wx',self.ZFT)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.zftwxEdit" ng-click="self.zftwxEdit=!self.zftwxEdit">修改</a></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.EWP.enable"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.EWP.wx_pub.enable"> <span><i class="handle" ng-click="self.save('EWP',self.EWP)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left"><i class="iconfont icon-weixin"></i> 微信支付-公众号</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.EWP.enable&&self.EWP.wx_pub.enable"><div class="col-sm-10 col-sm-offset-2"><span class="pull-left mt8">费率</span><div class="col-sm-1 mt8" ng-bind="self.EWP.wx_pub.rate" ng-if="!self.ewpwxEdit"></div><div class="col-sm-2" ng-if="self.ewpwxEdit"><input type="text" class="form-control" ng-model="self.EWP.wx_pub.rate"></div><div class="col-sm-3"><span class="pull-left mt8">费率承担：物业</span><div class="col-sm-6 mt8" ng-bind="self.EWP.wx_pub.share.PRJ" ng-if="!self.ewpwxEdit"></div><div class="col-sm-6" ng-if="self.ewpwxEdit"><input class="form-control" type="text" ng-model="self.EWP.wx_pub.share.PRJ"></div></div><div class="col-sm-4"><span class="pull-left mt8">商户</span><div class="col-sm-6 mt8" ng-bind="self.EWP.wx_pub.share.USR" ng-if="!self.ewpwxEdit"></div><div class="col-sm-6" ng-if="self.ewpwxEdit"><input class="form-control" type="text" ng-model="self.EWP.wx_pub.share.USR"></div></div></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.EWP.enable&&self.EWP.wx_pub.enable"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.ewpwxEdit" ng-click="self.ewpwxEdit=!self.ewpwxEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.ewpwxEdit" ng-click="self.ewpwxEdit=!self.ewpwxEdit;self.save('EWP',self.EWP)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.ewpwxEdit" ng-click="self.ewpwxEdit=!self.ewpwxEdit">修改</a></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.ZFT.enable"><div class="col-sm-2"><label class="switch switch-sm mb0 switch-label"><input type="checkbox" ng-model="self.ZFT.alipay.enable"> <span><i class="handle" ng-click="self.save('ZFT',self.ZFT)"></i></span></label></div><label class="col-sm-8 control-label" style="text-align:left"><i class="iconfont icon-zhifubao"></i> 支付宝支付</label></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.ZFT.enable&&self.ZFT.alipay.enable"><div class="col-sm-10 col-sm-offset-2"><span class="pull-left mt8">费率</span><div class="col-sm-1 mt8" ng-bind="self.ZFT.alipay.rate" ng-if="!self.zftaliEdit"></div><div class="col-sm-2" ng-if="self.zftaliEdit"><input type="text" class="form-control" ng-model="self.ZFT.alipay.rate"></div><div class="col-sm-3"><span class="pull-left mt8">费率承担：物业</span><div class="col-sm-6 mt8" ng-bind="self.ZFT.alipay.share.PRJ" ng-if="!self.zftaliEdit"></div><div class="col-sm-6" ng-if="self.zftaliEdit"><input class="form-control" type="text" ng-model="self.ZFT.alipay.share.PRJ"></div></div><div class="col-sm-4"><span class="pull-left mt8">商户</span><div class="col-sm-6 mt8" ng-bind="self.ZFT.alipay.share.USR" ng-if="!self.zftaliEdit"></div><div class="col-sm-6" ng-if="self.zftaliEdit"><input class="form-control" type="text" ng-model="self.ZFT.alipay.share.USR"></div></div></div></div><div class="col-sm-12" ng-if="self.epayment&&self.efundflow.selected=='PLT'&&self.ZFT.enable&&self.ZFT.alipay.enable"><div class="col-sm-2 col-sm-offset-6"><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.zftaliEdit" ng-click="self.zftaliEdit=!self.zftaliEdit;self.reload()">取消</a><a class="mt10 pull-right ml10" style="color:#09c" ng-if="self.zftaliEdit" ng-click="self.zftaliEdit=!self.zftaliEdit;self.save('ZFT.alipay',self.ZFT)">保存</a><a class="mt10 pull-right" style="color:#09c" ng-if="!self.zftaliEdit" ng-click="self.zftaliEdit=!self.zftaliEdit">修改</a></div></div></div></fieldset></form></div><div class="panel-body flex-initial pt0"></div></div><script type="text/ng-template" id="modal-finance-project-card.html"><form name="cardForm" novalidate ng-submit="cardForm.$valid&&self.submit()">
        <div class="modal-header bg-primary">
            <h4 class="modal-title text-center">{{ {true:'编辑银行卡',false:'添加银行卡'}[!!self.card.id] }}</h4>
        </div>
        <div class="modal-body">
            <div class="form-horizontal">
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$error.required,'has-success':(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$valid}">
                    <label class="col-sm-2 control-label">账户名称</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="name" ng-model="self.card.name" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.name.$dirty)&&cardForm.name.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$error.required,'has-success':(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$valid}">
                    <label class="col-sm-2 control-label">银行卡号</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="account" ng-model="self.card.account" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.account.$dirty)&&cardForm.account.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$error.required,'has-success':(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$valid}">
                    <label class="col-sm-2 control-label">开户银行</label>
                    <div class="col-sm-10">
                        <ui-select ng-model="self.card.origin" remove-selected="false" name="origin" required>
                            <ui-select-match placeholder="--选择银行(输入关键字筛选)--">{{$select.selected.title}}</ui-select-match>
                            <ui-select-choices repeat="item.id as item in self.bankData | filter: $select.search">
                                <div ng-bind-html="item.title | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>
                        <!-- <input type="text" class="form-control" name="origin" ng-model="self.card.origin" maxlength="50" required> -->
                        <span ng-if="(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.origin.$dirty)&&cardForm.origin.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="form-group has-feedback" ng-class="{'has-warning':(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$error.required,'has-success':(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$valid}">
                    <label class="col-sm-2 control-label">支行名称</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="subbranch" ng-model="self.card.subbranch" maxlength="50" required>
                        <span ng-if="(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$error.required" class="glyphicon glyphicon-warning-sign form-control-feedback"></span>
                        <span ng-if="(cardForm.$submitted||cardForm.subbranch.$dirty)&&cardForm.subbranch.$valid" class="glyphicon glyphicon-ok form-control-feedback"></span>
                    </div>
                </div>
                <div class="col-sm-12">
                    <label class="col-sm-2 control-label">账户归属</label>
                    <div class="col-sm-10">
                        <div class="form-inline" distpicker="self.card.locate">
                            <select class="form-control" ng-model="self.card.locate.province" distpicker-province></select>
                            <select class="form-control" ng-model="self.card.locate.city" distpicker-city></select>
                            <select class="form-control" ng-model="self.card.locate.district" distpicker-district></select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer mt30">
            <span class="text-danger mr15 ng-hide" ng-show="self.bankData.length===0">无可用开户银行，请维护开户银行信息！</span>
            <button class="btn btn-primary" type="submit" ng-disabled="self.bankData.length===0">确定</button>
            <button class="btn btn-default" type="reset" ng-click="self.cancel()">取消</button>
        </div>
    </form></script>