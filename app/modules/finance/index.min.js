"use strict";angular.module("app").controller("Finance",["$filter","$api",function(a,n){var c=this;c.status={CHECKING:"等待审核",CHECKFAILED:"审核失败",PROCESSING:"正在处理",FAILED:"处理失败",SUCCESS:"成功"},c.operation={color:{CHECKING:"text-primary",PROCESSING:"text-warning",CHECKFAILED:"text-danger",FAILED:"text-danger",SUCCESS:"text-success"},text:{CHECKING:"审核",PROCESSING:"状态",CHECKFAILED:"查看",FAILED:"查看",SUCCESS:"查看"}},n.business.accountbalance({project:"PLT"},function(n){c.accountbalance=n.result,c.accountbalance.total=a("number")(c.accountbalance.cash+c.accountbalance.frozen,2).replace(/\,/g,""),c.accountbalance.cash=a("number")(c.accountbalance.cash,2).replace(/\,/g,""),c.accountbalance.frozen=a("number")(c.accountbalance.frozen,2).replace(/\,/g,""),c.accountbalance.earning=a("number")(c.accountbalance.earning,2).replace(/\,/g,""),c.accountbalance.withdraw=a("number")(c.accountbalance.withdraw,2).replace(/\,/g,"")}),n.channelaccount.info({all:1,flow:"EXPENSE",pageindex:1,pagesize:6},function(a){c.card=a&&a.result&&a.result.detail||[],angular.forEach(c.card,function(a){a.locate&&angular.isString(a.locate)&&(angular.forEach(JSON.parse(a.locate),function(a,n){this.push(a)},a.locate=[]),a.locate=a.locate.join("-"))})}),n.withdraw.info({project:"PLT",pageindex:1,pagesize:6},function(a){c.withdraw=a&&a.result&&a.result.detail||[],angular.forEach(c.withdraw,function(a){var n=[];a.channelaccount.name&&n.push(a.channelaccount.name),a.channelaccount.origin&&n.push(a.channelaccount.origin),a.channelaccount.account&&n.push("尾号: "+a.channelaccount.account.substr(a.channelaccount.account.length-4)),a.channelaccount=n.join(" | ")||"关联账户不存在"})})}]);