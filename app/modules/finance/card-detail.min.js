"use strict";angular.module("app").controller("Finance.card.detail",["$api","$stateParams","$uibModal",function(t,n,e){var i=this;i.id=n.id,i.status=[{key:"CHECKING",title:"等待审核"},{key:"FAILED",title:"审核失败"},{key:"SUCCESS",title:"审核通过"}],angular.forEach(i.status,function(t){this[t.key]=t.title},i.status),i.getInfo=function(){t.channelaccount.info({id:i.id},$.proxy(function(t){this.detail=t.result[0]||{},this.detail.locate&&angular.isString(this.detail.locate)&&(angular.forEach(JSON.parse(this.detail.locate),function(t,n){this.push(t)},this.detail.locate=[]),this.detail.locate=this.detail.locate.join("-"))},i))},i.getInfo(),i.inject=function(){swal({title:"确认审核通过此项吗？",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确认"},function(){t.channelaccount.checking({id:i.id,status:"SUCCESS",reason:"审核通过"},i.getInfo)})},i.reject=function(n){e.open({templateUrl:"finance-card-detail-modal-reject.html",controllerAs:"self",controller:["$uibModalInstance","UI",function(t,n){this.submit=function(){this.reason?t.close(this.reason):n.AlertWarning("描述内容不能为空","请输入描述信息")},this.cancel=function(){t.dismiss("cancel")}}],size:n}).result.then(function(n){n&&t.channelaccount.checking({id:i.id,status:"FAILED",reason:n},i.getInfo)})}}]);