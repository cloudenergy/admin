"use strict";angular.module("app").component("sensor",{templateUrl:"app/modules/byitem/sensor.html?rev=99cdf99791",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$api","$timeout",function(e,n){var t,i=this,c=function(){e.sensor.info({project:i.resolve.projectid,key:i.sensorSearchKey,devicetype:i.devicetype.selected,pageindex:i.currentPage},function(e){angular.forEach(i.listData=e.result.detail||[],function(e){e.did==i.resolve.selected&&(console.log(e),e.isEnable=!0)}),i.pagingCount=e.result.paging.count})};i.SwitchSensor=function(e,t){angular.forEach(i.listData,function(i){n(i.did!=e.did?i.isEnable=!1:i.isEnable=t)})},i.OnSearch=function(e){(e||!angular.equals(t,i.sensorSearchKey))&&c(),t=i.sensorSearchKey},i.currentPage=1,i.pageChanged=c,i.devicetype=[{id:void 0,name:"全部类型"}],i.devicetype.select=c,i.$onInit=function(){e.device.type({project:i.resolve.projectid},function(e){angular.forEach(e.result,function(e){i.devicetype[e.id]=e,i.devicetype.push(e)})}),c()},i.Ok=function(){angular.forEach(i.listData,function(e){e.isEnable&&(i.selected=e.did)}),i.close({$value:i.selected})},i.Cancel=function(){i.dismiss()}}]});