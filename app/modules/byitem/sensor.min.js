"use strict";angular.module("app").component("sensor",{templateUrl:"app/modules/byitem/sensor.html?rev=f0577dc141",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$api","$uibModal",function(e,n){var i=this;i.currentPage=1,i.popPageSize=10,i.devicetype=[{id:void 0,name:"全部类型"}],i.$onInit=function(){e.device.type({project:i.resolve.projectid},function(e){angular.forEach(e.result,function(e){i.devicetype[e.id]=e,i.devicetype.push(e)})}),console.log(i.resolve);i.resolve.addItemsIDs;e.sensor.info({project:i.resolve.projectid,key:i.sensorSearchKey,devicetype:i.devicetype.selected,pageindex:i.currentPage,SHOWALL:!0},function(e){console.log(e),angular.forEach(i.listData=e.result.detail,function(e){angular.forEach(i.resolve.selected,function(n){e.did==n.key&&(e.isEnable=e.originisEnable=!0,e.switch=!1)}),e.did==i.resolve.selected.key&&(e.isEnable=!0)})})},i.SwitchSensor=function(e){e.isEnable=!e.isEnable,e.isEnable==e.originisEnable&&(e.switch=!1)||(e.switch=!0)},i.filterItem=function(e){var n=!0;return(n=i.devicetype.selected?!!~e.devicetype.indexOf(i.devicetype.selected):n)&&(n=i.sensorSearchKey?!(!~e.title.indexOf(i.sensorSearchKey)&&!~e.did.indexOf(i.sensorSearchKey)):n),n},i.SelectAll=function(){angular.forEach(i.filterData,function(e){e.isEnable=!0})},i.AntiElection=function(){angular.forEach(i.filterData,function(e){e.isEnable=!e.isEnable})},i.Ok=function(){var e=[],n=[];angular.forEach(i.filterData,function(i){i.switch&&(i.isEnable?e.push(i):n.push(i))}),e.length||n.length?i.close({$value:{addItems:e,removeItems:n}}):i.dismiss()},i.Cancel=function(){i.dismiss()}}]});