"use strict";angular.module("app").component("sensor",{templateUrl:"app/modules/byitem/sensor.html?rev=8df2ca8dec",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$api","$uibModal",function(e,i){var n=this;n.currentPage=1,n.popPageSize=10,n.devicetype=[{id:void 0,name:"全部类型"}],n.$onInit=function(){e.device.type({project:n.resolve.projectid},function(e){angular.forEach(e.result,function(e){n.devicetype[e.id]=e,n.devicetype.push(e)})});n.resolve.addItemsIDs;e.sensor.info({project:n.resolve.projectid,key:n.sensorSearchKey,devicetype:n.devicetype.selected,pageindex:n.currentPage,SHOWALL:!0},function(e){angular.forEach(n.listData=e.result.detail,function(e){angular.forEach(n.resolve.selected,function(i){e.did==i.key&&(e.isEnable=e.originisEnable=!0,e.switch=!1)}),e.did==n.resolve.selected.key&&(e.isEnable=!0)})})},n.SwitchSensor=function(e){e.isEnable=!e.isEnable,e.isEnable==e.originisEnable&&(e.switch=!1)||(e.switch=!0)},n.filterItem=function(e){var i=!0;return(i=n.devicetype.selected?!!~e.devicetype.indexOf(n.devicetype.selected):i)&&(i=n.sensorSearchKey?!!(~e.title.indexOf(n.sensorSearchKey)||~e.did.indexOf(n.sensorSearchKey)||e.subentry&&~e.subentry.indexOf(n.sensorSearchKey)):i),i},n.SelectAll=function(){angular.forEach(n.filterData,function(e){e.isEnable=!0,e.isEnable==e.originisEnable&&(e.switch=!1)||(e.switch=!0)})},n.AntiElection=function(){angular.forEach(n.filterData,function(e){e.isEnable=!e.isEnable,e.isEnable==e.originisEnable&&(e.switch=!1)||(e.switch=!0)})},n.Ok=function(){var e=[],i=[];angular.forEach(n.filterData,function(n){n.switch&&(n.isEnable?e.push(n):i.push(n))}),e.length||i.length?n.close({$value:{addItems:e,removeItems:i}}):n.dismiss()},n.Cancel=function(){n.dismiss()}}]});