<div class="panel panel-default mb0 layout-column"><div class="panel-body flex-initial pb0"><div class="pull-right pt8 pr15 mb10"><a class="btn-link" ng-click="$ctrl.addnode('root')">添加根节点</a></div></div><div class="panel-body flex overflow-auto pt0 pb0"><table class="table table-bordered table-hover mb0 table-node text-center"><thead><tr><td class="col-sm-2">属性名</td><td class="col-sm-1"><div>面积</div><div>[AREA]</div></td><td class="col-sm-1"><div>人数</div><div>[PERSON]</div></td><td class="col-sm-2">公式</td><td class="col-sm-4">仪表关联</td><td class="col-sm-2">操作</td></tr></thead><tbody><tr ng-repeat="item in $ctrl.itemData"><td colspan="6" class="table-td"><div class="col-sm-12 table-row" ng-click="item.showChildren=!item.showChildren"><div class="col-sm-2"><span ng-if="item.id&&!item.edit">{{item.title}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!item.id||item.edit" type="text" ng-model="item.title"></div><div class="col-sm-1"><span ng-if="item.id&&!item.edit">{{item.formula.variables.AREA}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!item.id||item.edit" type="text" ng-model="item.formula.variables.AREA"></div><div class="col-sm-1"><span ng-if="item.id&&!item.edit">{{item.formula.variables.PERSON}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!item.id||item.edit" type="text" ng-model="item.formula.variables.PERSON"></div><div class="col-sm-2"><span ng-if="item.id&&!item.edit">{{item.formula.formula}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!item.id||item.edit" type="text" ng-model="item.formula.formula"></div><div class="col-sm-2 col-sm-offset-4" ng-if="item.id"><a class="text-blue" ng-if="!item.edit" ng-click="item.edit=true;$event.stopPropagation();">编辑</a><a class="text-blue" ng-if="item.edit==true" ng-click="item.edit=false;$ctrl.save('root',item,'UPDATE');$event.stopPropagation();">保存</a><a class="text-blue ml10" ng-if="item.edit==true" ng-click="item.edit=false;$ctrl.loadData();$event.stopPropagation();">取消</a><a class="text-blue ml10" ng-click="$ctrl.delete(item);$event.stopPropagation();">删除</a></div><div class="col-sm-2 col-sm-offset-4" ng-if="!item.id"><a class="text-blue" ng-click="$ctrl.save('root',item,'ADD')">保存</a><a class="text-blue ml10" ng-click="$ctrl.cancel($ctrl.itemData,$index)">取消</a></div></div><div class="col-sm-12 table-child" ng-if="item.showChildren" ng-repeat="child in item.childArray"><div class="col-sm-2"><span ng-if="child.id&&!child.edit">{{child.title}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!child.id||child.edit" type="text" ng-model="child.title"></div><div class="col-sm-1"><span ng-if="child.id&&!child.edit">{{child.formula.variables.AREA}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!child.id||child.edit" type="text" ng-model="child.formula.variables.AREA"></div><div class="col-sm-1"><span ng-if="child.id&&!child.edit">{{child.formula.variables.PERSON}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!child.id||child.edit" type="text" ng-model="child.formula.variables.PERSON"></div><div class="col-sm-4 col-sm-offset-2">{{child.sensorName}}<a class="glyphicon glyphicon-link" ng-click="$ctrl.changeSensor(child)"></a></div><div class="col-sm-2" ng-if="!child.id"><a class="text-blue" ng-click="$ctrl.save('child',child,'ADD')">保存</a><a class="text-blue ml10" ng-click="$ctrl.cancel(item.childArray,$index)">取消</a></div><div class="col-sm-2" ng-if="child.id"><a class="text-blue" ng-if="!child.edit" ng-click="child.edit=true;">编辑</a><a class="text-blue" ng-if="child.edit==true" ng-click="child.edit=false;$ctrl.save('child',child,'UPDATE')">保存</a><a class="text-blue ml10" ng-if="child.edit==true" ng-click="$ctrl.loadData();child.edit=false">取消</a><a class="text-blue ml10" ng-click="$ctrl.delete(child,item)">删除</a></div></div><div class="col-sm-12 table-child" ng-if="item.showChildren&&item.id"><div class="col-sm-2 col-sm-offset-10"><a class="text-blue" ng-click="$ctrl.addnode('child',item)">添加</a></div></div></td></tr></tbody></table></div><div class="panel-body flex-initial pt0"></div></div>