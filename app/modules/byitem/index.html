<div class="panel panel-default mb0 layout-column"><div class="panel-body flex-initial pb0"><div class="pull-right pt8 pr15 mb10"><a class="btn-link" ng-click="$ctrl.addnode('root')">添加属性</a></div></div><div class="panel-body flex overflow-auto pt0 pb0"><table class="table table-bordered table-hover mb0 table-node text-center"><thead><tr><td class="col-sm-2">属性名</td><td class="col-sm-1"><div>面积</div><div>[AREA]</div></td><td class="col-sm-1"><div>人数</div><div>[PERSON]</div></td><td class="col-sm-2">公式<i class="fa fa-question-circle ml5" popover-placement="top" uib-popover="每个参数必须单独填写在[]内，比如[AREA]" popover-is-open="over" ng-mouseenter="over=true" ng-mouseleave="over=false"></i></td><td class="col-sm-4">仪表关联</td><td class="col-sm-2">操作</td></tr></thead><tbody><tr ng-repeat="item in $ctrl.itemData"><td colspan="6" class="table-td"><div class="col-sm-12 table-row" ng-click="item.showChildren=!item.showChildren"><div class="col-sm-2"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="item.title"></div><div class="col-sm-1"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="item.formula.variables.AREA"></div><div class="col-sm-1"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="item.formula.variables.PERSON"></div><div class="col-sm-2"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="item.formula.formula"></div><div class="col-sm-4">{{item.sensorName}}<a class="glyphicon glyphicon-link" ng-click="$ctrl.changeSensor(item);$event.stopPropagation();"></a></div><div class="col-sm-2" ng-if="item.id"><a ng-click="$event.stopPropagation();$ctrl.save('root',item,'UPDATE');"><i class="fa fa-floppy-o"></i></a><a class="ml10" ng-click="item.showChildren=true;$ctrl.addnode('child',item);$event.stopPropagation();"><i class="fa fa-plus-square"></i></a><a class="ml10" ng-click="$ctrl.delete(item);$event.stopPropagation();"><i class="fa fa-times"></i></a></div><div class="col-sm-2" ng-if="!item.id"><a ng-click="$ctrl.save('root',item,'ADD');$event.stopPropagation();"><i class="fa fa-floppy-o"></i></a><a class="ml10" ng-click="$ctrl.cancel($ctrl.itemData,$index)"><i class="fa fa-times"></i></a></div></div><div class="col-sm-12 table-child" style="padding-top:10px!important" ng-if="item.showChildren" ng-repeat="child in item.childArray"><div class="col-sm-2"><input class="form-control table-child-input" ng-click="$event.stopPropagation();" type="text" ng-model="child.title"></div><div class="col-sm-1"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="child.formula.variables.AREA"></div><div class="col-sm-1"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="child.formula.variables.PERSON"></div><div class="col-sm-2"><input class="form-control" ng-click="$event.stopPropagation();" type="text" ng-model="child.formula.formula"></div><div class="col-sm-4">{{child.sensorName}}<a class="glyphicon glyphicon-link" ng-click="$ctrl.changeSensor(child)"></a></div><div class="col-sm-2" ng-if="!child.id"><a style="margin-left: -20px" ng-click="$ctrl.save('child',child,'ADD')"><i class="fa fa-floppy-o"></i></a><a class="ml10" ng-click="$ctrl.cancel(item.childArray,$index)"><i class="fa fa-times"></i></a></div><div class="col-sm-2" ng-if="child.id"><a style="margin-left: -20px" ng-click="$ctrl.save('child',child,'UPDATE')"><i class="fa fa-floppy-o"></i></a><a class="ml10" ng-click="$ctrl.delete(child,item)"><i class="fa fa-times"></i></a></div></div></td></tr></tbody></table></div><div class="panel-body flex-initial pt0"></div></div>