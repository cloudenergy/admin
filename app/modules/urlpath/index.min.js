"use strict";angular.module("app").component("urlpathInfo",{templateUrl:"app/modules/urlpath/index.html?rev=9f48391270",controller:["$api","SweetAlert",function(e,n){var t,i=this,d=[];i.doSave=function(n){n.preventDefault();var t=[],o=[];!function e(n,i){if("/"!=n._id&&(i+=n._id),void 0!=n.authtype){var d={_id:n._id,desc:n.desc,authtype:n.authtype,needlogin:n.needlogin,enable:n.enable};d._id=i,t.push(d)}void 0!=n.nodes&&n.nodes.length>0&&_.each(n.nodes,function(n){e(n,i+"/")})}(i.urlpath[0],""),_.each(d,function(e){e.url&&o.push(e.url._id)}),e.urlpath.delete({id:o}),e.urlpath.update(t)},e.urlpath.info(function(e){t=e.result;var n={_id:"/",nodes:[]};_.each(t,function(e){var t=e._id.split("/"),i=n;_.each(t,function(n,d){if(""!=n){var o=t.length==d+1,u=_.find(i.nodes,function(e){return e._id==n});void 0==u&&(u=o?{_id:n,url:e,desc:e.desc||"",enable:e.enable,needlogin:e.needlogin,authtype:e.authtype,nodes:[]}:{_id:n,desc:e.desc||"",nodes:[]},i.nodes.push(u)),i=u}})}),i.urlpath=[n]},n.error),i.RemoveNode=function(e,n){e.remove(),d.push(n)},i.newSubItem=function(e){e.node.nodes.push({_id:"",authtype:"NONE",needlogin:!0,enable:!0,editing:!0,isnew:!0,nodes:[]})},i.cancelEditing=function(e,n){n._id.length?n.editing=!1:i.RemoveNode(e,n)},i.save=function(e){e.editing=!1,e.isnew=!1}}]});