"use strict";angular.module("app").component("urlpathInfo",{templateUrl:"app/modules/urlpath/index.html?rev=366322c795",controller:["$api","SweetAlert",function(t,e){var i,u=this,o=[];u.doSave=function(e){e.preventDefault();var d=[],n=[];!function n(e,t){if("/"!=e._id&&(t+=e._id),null!=e.authtype){var i={_id:e._id,desc:e.desc,authtype:e.authtype,needlogin:e.needlogin,enable:e.enable};i._id=t,d.push(i)}null!=e.nodes&&0<e.nodes.length&&_.each(e.nodes,function(e){n(e,t+"/")})}(u.urlpath[0],""),_.each(o,function(e){e.url&&n.push(e.url._id)}),t.urlpath.delete({id:n}),t.urlpath.update(d)},t.urlpath.info(function(e){i=e.result;var n={_id:"/",nodes:[]};_.each(i,function(d){var u=d._id.split("/"),o=n;_.each(u,function(n,e){if(""!=n){var t=u.length==e+1,i=_.find(o.nodes,function(e){return e._id==n});null==i&&(i=t?{_id:n,url:d,desc:d.desc||"",enable:d.enable,needlogin:d.needlogin,authtype:d.authtype,nodes:[]}:{_id:n,desc:d.desc||"",nodes:[]},o.nodes.push(i)),o=i}})}),u.urlpath=[n]},e.error),u.RemoveNode=function(e,n){e.remove(),o.push(n)},u.newSubItem=function(e){e.node.nodes.push({_id:"",authtype:"NONE",needlogin:!0,enable:!0,editing:!0,isnew:!0,nodes:[]})},u.cancelEditing=function(e,n){n._id.length?n.editing=!1:u.RemoveNode(e,n)},u.save=function(e){e.editing=!1,e.isnew=!1}}]});