<style>.sensorItem {
        margin-top: 14px;
    }

    .expandable:hover {
        cursor: pointer;
        background-color: #eee;
    }

    .table>tbody>tr>td {
        vertical-align: middle;
    }

    .table>tbody>tr>td td,
    .table>thead>tr .table th {
        border-top: none;
        vertical-align: middle;
    }

    .table thead th.nopadding,
    .table tbody td.nopadding {
        padding: 0px;
    }

    .table thead th.nopadding .table,
    .table tbody td.nopadding .table {
        margin-bottom: 0px;
    }

    .row-content {
        padding-left: 250px;
    }

    .row-content .sider-tree {
        margin-left: -250px;
    }</style><script type="text/ng-template" id="importSensor.html"><div class="container-fluid">
        <div align="center" style="padding: 30; border-bottom: 1px solid #E5E5E5; min-height: 16; ">
            <h3>å¯¼å…¥æ™ºèƒ½ä»ªè¡¨</h3>
        </div>
        <div align="center">
            <form action="{{actionURL}}" method="post" ng-upload="OnUploadComplete(content)" class="m20">
                <input type="file" name="sensors" class="col-md-6" />
                <input type="submit" value="ä¸Šä¼ " class="btn btn-primary" ng-disabled="$isUploading" />
                <input type="hidden" name="projectid" value="{{project}}" />
                <input type="hidden" name="buildingid" value="{{building}}" />
                <input type="hidden" name="customerid" value="{{customer}}" />
            </form>
            <div class="text-left m20">
                <a target="_blank" href="files/ä»ªè¡¨å¯¼å…¥æ¨¡æ¿.xlsx" class="text-primary bold">é»˜è®¤æ¨¡æ¿ä¸‹è½½</a>
            </div>
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;">
            <button class="btn btn-primary" ng-click="ok()" ng-disabled="$isUploading">ç¡®å®š</button>
            <button class="btn btn-warning" ng-click="cancel()" ng-disabled="$isUploading">å–æ¶ˆ</button>
        </div>
    </div></script><script type="text/ng-template" id="sensorAttribute.html"><div class="container-fluid">
        <div align="center" style="padding: 30; border-bottom: 1px solid #E5E5E5; min-height: 16; ">
            <h3>æ™ºèƒ½ä»ªè¡¨å±æ€§</h3>
        </div>
        <div class="row sensorItem ml20">
            <div class="btn-group">
                <a class="btn" ng-class="{2:'btn-primary',1:'btn-default',3:'btn-default'}[else]" ng-click="else=2">
                            ä¿¡æ¯
                        </a>
                <a class="btn" ng-class="{1:'btn-primary',2:'btn-default',3:'btn-default'}[else]" ng-click="else=1">
                            é©±åŠ¨
                        </a>
                <!--<a class="btn" ng-class="{3:'btn-primary',1:'btn-default',2:'btn-default'}[else]" ng-click="else=3">
                            å…¶ä»–
                        </a>-->
            </div>
        </div>
        <div class="row" ng-if="else==2">
            <div class="row sensorItem col-sm-8 col-sm-offset-2">
                è®¾å¤‡æ ‡è¯†<input class="form-control mb15" type="text" ng-model="sensorInfo.tag"> è®¾å¤‡åç§°
                <input class="form-control mb15" type="text" ng-model="sensorInfo.title"> æ›´æ–°é¢‘ç‡
                <input class="form-control mb15" type="text" ng-model="sensorInfo.freq"> å€ç‡
                <input class="form-control mb15" type="text" ng-model="sensorInfo.comi">
            </div>
        </div>
        <div class="row" ng-if="else==1">
            <div class="row sensorItem">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right">æ™ºèƒ½ä»ªè¡¨é©±åŠ¨ï¼š</div>
                <div class="col-lg-4">
                    <ui-select ng-model="DriverCompany.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨å‚å•†--">{{$select.selected.id}}</ui-select-match>
                        <ui-select-choices repeat="item in DriverCompany | filter: $select.search">
                            <div ng-bind-html="item.id | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
            <div class="row sensorItem">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right"></div>
                <div class="col-lg-4">
                    <!--<select class="form-control" ng-options="drivername.id as drivername.id for drivername in DriverName" ng-model="driverNameSelected"></select>-->
                    <ui-select ng-model="DriverName.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨é©±åŠ¨åç§°--">{{$select.selected.id}}</ui-select-match>
                        <ui-select-choices repeat="item in DriverName | filter: $select.search">
                            <div ng-bind-html="item.id | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
            <div class="row sensorItem">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right"></div>
                <div class="col-lg-4">
                    <!--<select class="form-control" ng-options="driverversion.id as driverversion.id for driverversion in DriverVersion" ng-model="driverVersionSelected"></select>-->
                    <ui-select ng-model="DriverVersion.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨é©±åŠ¨ç‰ˆæœ¬--">{{$select.selected.id}}</ui-select-match>
                        <ui-select-choices repeat="item in DriverVersion | filter: $select.search">
                            <div ng-bind-html="item.id | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
            <div class="row sensorItem" ng-show="devicedrive">
                <div class="col-lg-2"></div>
                <div class="col-lg-3" align="right">æ™ºèƒ½ä»ªè¡¨å‹å·ï¼š</div>
                <div class="col-lg-4">
                    <!--<select class="form-control" ng-options="adaptdevice.code as adaptdevice.desc for adaptdevice in AdaptDevice" ng-model="adaptDeviceSelected"></select>-->
                    <ui-select ng-model="AdaptDevice.selected" remove-selected="false">
                        <ui-select-match placeholder="--é€‰æ‹©æ™ºèƒ½ä»ªè¡¨å‹å·--">{{$select.selected.desc}}</ui-select-match>
                        <ui-select-choices repeat="item in AdaptDevice | filter: $select.search track by item.code">
                            <div ng-bind-html="item.desc | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-lg-2"></div>
            </div>
        </div>
        <div class="row" ng-if="else==3">
            <div class="row sensorItem">
                <div class="col-lg-4 col-lg-offset-4">ä»ªè¡¨æ€»è¡¨<input type="checkbox"></div>
            </div>
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;">
            <button class="btn btn-primary" ng-click="Ok()">ç¡®å®š</button>
            <button class="btn btn-warning" ng-click="Cancel()">å–æ¶ˆ</button>
        </div>
    </div></script><div class="panel panel-default mb0 layout-column"><div class="panel-body flex-initial"><form class="form-inline pb10 bb"><label class="form-group mr5" ng-if="DeviceTypes.length">ç±»å‹</label><div class="form-group mr2" ng-if="DeviceTypes.length"><ui-select style="width:110px" ng-model="DeviceTypes.selected" remove-selected="false" on-select="DeviceTypes.select()"><ui-select-match placeholder="--é€‰æ‹©è®¾å¤‡--">{{$select.selected.title}}</ui-select-match><ui-select-choices repeat="item.id as item in DeviceTypes | filter: $select.search"><div ng-bind-html="item.title | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="form-group ml2 mr2 w200"><input class="form-control" type="text" placeholder="å…³é”®å­—ï¼šID/åç§°" ng-model="searchKey"></div><div class="form-group pl10 mr10"><a class="btn-link" ng-click="OnSearch()">æŸ¥è¯¢</a></div><div class="pull-right pt7"><div class="form-group"><a class="btn-link" ng-show="$root.Rule.admin.sensor.mask" ng-click="OnMaskAll(false)">å…¨éƒ¨å¯ç”¨ </a><a class="btn-link ml5" ng-show="$root.Rule.admin.sensor.mask" ng-click="OnMaskAll(true)">å…¨éƒ¨å±è”½ </a><a class="btn-link ml5" ng-show="$root.Rule.admin.sensor.syncdata" ng-click="OnSyncAll()">å¼‚å¸¸åŒæ­¥ </a><a class="btn-link ml5" href="javascript:void(0)" ng-click="importSensor()">å¯¼å…¥</a> <a class="btn-link ml5" ng-show="$root.Rule.admin.sensor.syncdata" modal-download="downloadFile" modal-download-name="downloadName" ng-click="exportSensor()">å¯¼å‡º</a></div></div></form></div><div class="panel-body flex overflow-auto pt0 pb0"><div class="row no-margin"><div class="col-xs-9 pl0 pr0"><table class="table table-bordered table-hover mb0"><thead><tr><th class="text-center" style="width:60px">åºå·</th><th>ID</th><th>ç¼–ç </th><th>åç§°</th><th>å€ç‡</th><th colspan="5" class="nopadding"><table class="table"><tr><th class="col-md-7">è¯»æ•°</th><th class="col-md-5">æ“ä½œ</th></tr></table></th><th style="width:100px" class="text-center">ä»ªè¡¨å±æ€§è¯¦æƒ…</th></tr></thead><tbody><tr ng-repeat="sensor in viewOfSensor"><td class="text-center">{{(currentPage-1)*pageSize+$index+1}}</td><td class="col-md-1">{{sensor.id.substr(12,12)}}</td><td ng-mouseover="tagChange=true" ng-mouseleave="tagChange=false" style="max-width: 220px"><span class="tableInlineBlock" style="max-width:200px"><nobr>{{sensor.tag}}</nobr></span><i class="glyphicon glyphicon-pencil" ng-show="tagChange" ng-click="accountChange(sensor,'tag')"></i><i ng-show="!tagChange" style="display: inline-block;width: 13px"></i></td><td ng-mouseover="titleChange=true" ng-mouseleave="titleChange=false" style="max-width: 220px"><span class="tableInlineBlock" style="max-width:200px"><nobr>{{sensor.title}}</nobr></span><i class="glyphicon glyphicon-pencil" ng-show="titleChange" ng-click="accountChange(sensor,'title')"></i><i ng-show="!titleChange" style="display: inline-block;width: 13px"></i></td><td ng-mouseover="comiChange=true" ng-mouseleave="comiChange=false" style="max-width: 220px"><span class="tableInlineBlock" style="max-width:200px"><nobr>{{sensor.comi}}</nobr></span><i class="glyphicon glyphicon-pencil" ng-show="comiChange" ng-click="accountChange(sensor,'comi')"></i><i ng-show="!comiChange" style="display: inline-block;width: 13px"></i></td><td class="text-left no-padding" ng-style="{'color': channel.status.color}" colspan="5"><div class="row" ng-repeat="channel in sensor.channels"><div class="col-md-7 pb5 pt5" ng-class="{'bb': !$last}"><b>{{channel.channel}}</b> <span class="hint hint--right" ng-class="{0:'text-success',1:'text-danger',2:'text-warning'}[channel.status]" ng-class="channel.status.hintStyle" popover-placement="right" uib-popover="å®æ—¶è¯»æ•°:{{channel.realdata}}æœ€åä¸Šä¼ :{{channel.lastupdate|date:'yyyy-M-dd H:mm:ss'}}" popover-trigger="mouseenter">{{channel.lasttotal}}</span></div><div class="col-md-5"><div class="pb5 pt5 text-blue"><a href="javascript:void(0)" class="mr5" ng-show="$root.Rule.admin.sensor.mask" ng-click="OnMask(channel)">{{channel.mask&&'å¯ç”¨'||'å±è”½'}}</a></div></div></div></td><td class="text-center"><a href="javascript:void(0)" ng-click="OnSensorAttribute(sensor)" class="text-blue">è¯¦æƒ…</a></td></tr></tbody></table></div><div class="col-xs-3"><div class="btn-group pb10 ml15 mt10"><a ng-class="{true:'cursor-none',false:'text-blue'}[customer.enable]" ng-model="customer.enable" uib-btn-radio="true">ç¤¾ä¼šå±æ€§ </a>/ <a ng-class="{true:'cursor-none',false:'text-blue'}[!customer.enable]" ng-model="customer.enable" uib-btn-radio="false">å»ºç­‘</a></div><div class="form-group pb10 mr2" ng-if="!customer.enable&&buildings.length"><ui-select style="width:180px" ng-model="buildings.selected" remove-selected="false" on-select="buildings.select()"><ui-select-match placeholder="--é€‰æ‹©å»ºç­‘--">{{$select.selected.title}}</ui-select-match><ui-select-choices repeat="item.id as item in buildings | filter: $select.search"><div ng-bind-html="item.title | highlight: $select.search"></div></ui-select-choices></ui-select></div><div class="col-xs-12 w180 sider-tree" ng-show="customer.enable"><input type="text" class="form-control mt5" placeholder="ğŸ”ç¤¾ä¼šå±æ€§å…³é”®å­—æœç´¢" ng-model="customer.search"><div jstree="customer" jstree-search="customer.search"></div></div></div></div></div><div class="panel-body flex-initial"><div class="pt15 bt col-xs-9 pl0 pr0"><div class="pull-right"><span class="inline fs34" style="vertical-align:top">ä»ªè¡¨æ€»æ•°{{itemsTotal || "0"}}æ¡</span><uib-pagination class="mt0 mb0 ml10" total-items="itemsTotal" ng-model="currentPage" items-per-page="pageSize" max-size="10" rotate="false" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination></div></div></div></div><script type="text/ng-template" id="titleChange.html"><div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">{{title}}ä¼ æ„Ÿå™¨åç§°ä¿®æ”¹</h4>
        </div>
        <div class="modal-body text-center">
            <input type="text" class="form-control" ng-model="sensor.title">
        </div>
        <div class="modal-footer text-center">
            <button class="btn btn-sm btn-danger mr5" ng-click="ok()">ä¿®æ”¹</button>
            <button class="btn btn-sm btn-warning" ng-click="cancel()">å–æ¶ˆ</button>
        </div>
    </div></script><script type="text/ng-template" id="tagChange.html"><div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">{{title}}ä¼ æ„Ÿå™¨ç¼–ç ä¿®æ”¹</h4>
        </div>
        <div class="modal-body text-center">
            <input type="text" class="form-control" ng-model="sensor.tag">
        </div>
        <div class="modal-footer text-center">
            <button class="btn btn-sm btn-danger mr5" ng-click="ok()">ä¿®æ”¹</button>
            <button class="btn btn-sm btn-warning" ng-click="cancel()">å–æ¶ˆ</button>
        </div>
    </div></script><script type="text/ng-template" id="comiChange.html"><div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">{{title}}ä¼ æ„Ÿå™¨å€ç‡ä¿®æ”¹ä¿®æ”¹</h4>
        </div>
        <div class="modal-body text-center">
            <input type="text" class="form-control" ng-model="sensor.comi">
        </div>
        <div class="modal-footer text-center">
            <button class="btn btn-sm btn-danger mr5" ng-click="ok()">ä¿®æ”¹</button>
            <button class="btn btn-sm btn-warning" ng-click="cancel()">å–æ¶ˆ</button>
        </div>
    </div></script>