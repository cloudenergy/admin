<div class="row"><div class="col-xs-12 col-sm-12 adminBody"><div class="panel panel-default"><div class="panel-body"><form class="form-horizontal" role="form" name="form" ng-submit="$ctrl.submit()"><fieldset><div class="form-group container-fluid pb15" style="border-bottom: 1px solid #ddd"><a class="btn btn-warning" ui-sref="admin.billingservice.info"><span class="glyphicon glyphicon-chevron-left"></span> 计费策略</a></div><div class="form-group mt30"><label for="inputName" class="col-sm-2 control-label">策略名称</label><div class="col-sm-5"><input type="text" required class="form-control" id="id" name="name" ng-model="$ctrl.serviceTitle"></div></div><div class="form-group mt30"><label class="col-sm-2 control-label">价格设置</label><div class="col-sm-6"><div class="col-sm-3" style="padding-left: 0"><input required class="form-control col-sm-5" type="number" ng-model="$ctrl.fixprice" step="0.00001" ng-disabled="$ctrl.advanced"></div><div class="col-sm-2" style="line-height: 34px" ng-click="$ctrl.setSelectChecked()"><input class="ml10" type="checkbox" ng-model="$ctrl.advanced" id="advanced"><label for="advanced" class="ml5">高级</label></div></div></div><div class="form-group mt30" ng-repeat="t in $ctrl.times" ng-if="$ctrl.advanced"><label class="col-sm-2 control-label"><span ng-show="$index===0">时段设置</span></label><div class="form-group"><div class="col-sm-1"><select class="form-control hourFrom" ng-model="t.HourFrom" id="select"><option ng-repeat="h in $ctrl.hours" ng-selected="{{h==t.HourFrom}}" value="{{h}}">{{h}}</option></select></div><span class="hour" style="line-height: 34px;float: left;position: relative">点 -</span><div class="col-sm-1"><select class="form-control hourTo" ng-model="t.HourTo"><option ng-repeat="h in $ctrl.hours" ng-selected="{{h==t.HourTo}}" value="{{h}}">{{h}}</option></select></div><span class="" style="line-height: 34px;float: left;position: relative">点</span><div class="col-sm-2"><label class="col-sm-4 text-right" style="line-height: 34px">￥</label><div class="col-sm-8"><input required class="form-control col-sm-5" ng-model="t.price" step="0.00001" type="number"></div></div><div class="col-sm-1"><span class="glyphicon glyphicon-minus" ng-show="$index!=0&&$index!=1" ng-click="$ctrl.removeTime($index)" style="line-height: 34px"></span> <span class="glyphicon glyphicon-plus ml25" ng-show="$ctrl.times.length===$index+1" ng-click="$ctrl.addTime()" style="line-height: 34px"></span></div></div></div><div class="form-group mt30"><label class="col-sm-2 control-label">计费仪表</label><div class="col-sm-2" style="padding-top: 7px;margin-bottom: 0">{{$ctrl.equipments.length || $ctrl.equipments}}个 <a class="text-blue ml5" style="cursor: pointer" ng-click="$ctrl.OnSelectSensor($event)">管理</a></div><div class="col-sm-10 col-sm-offset-1 mt20" style="border-bottom: 1px solid #DDD"></div></div><div class="form-group container-fluid pb15 mt10"><div class="text-center"><button type="submit" class="btn btn-success"><span class="glyphicon glyphicon-ok"></span>&nbsp;保存</button></div></div></fieldset></form></div></div></div></div><script type="text/ng-template" id="modal-channelselectUpdate.html"><div class="container-fluid">
        <div align="center" style="padding: 30; border-bottom: 1px solid #E5E5E5; min-height: 16; ">
            <h3>管理智能仪表</h3>
        </div>
        <div class="row" style="margin: 10px 0 0 0; ">
            <div class="col-lg-5">
                <input type="text" class="form-control" id="input-customer-freq" placeholder="输入智能仪表名称进行查询" ng-model="sensorSearchKey">
            </div>
            <div class="col-lg-2">
                <a class="btn btn-info" href="javascript:void(0)" ng-click="onSearchSensor($event)">
                    <span class="glyphicon glyphicon-search"></span> 查询
                </a>
            </div>
            <div class="col-lg-5 pull-right">
                <a class="btn btn-success col-lg-4 pull-right" href="javascript:void(0)" ng-click="OnSelectAll($event)">
                    <span class="glyphicon glyphicon-asterisk"></span>全选
                </a>
                <div class="col-lg-8 pull-right">
                    <ui-select ng-model="devicetype.selected" remove-selected="false">
                        <ui-select-match placeholder="--仪表类型--">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="item in devicetype | filter: $select.search">
                            <div ng-bind-html="item.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </div>
        <div align="center" style="position: relative; padding: 15px 30px 0px 30px;">
            <div class="row-fluid list-group">
                <a href="javascript:void(0)" class="list-group-item" ng-class="sensor.isEnable ? 'active':''" ng-click="SwitchSensor($event, sensor)" ng-repeat="sensor in viewOfSensors | startFrom: (currentPage-1) * popPageSize | limitTo: popPageSize">
                    <span ng-show="sensor.title">名称:</span>{{sensor.title}}&nbsp;{{sensor.channel}}&nbsp;<span ng-show="sensor.addrid">ID:</span>{{sensor.addrid}}<span ng-show="sensor.channelname">&nbsp通道名称:</span>{{sensor.channelname}}
                </a>
            </div>
        </div>
        <div align="center">
            <uib-pagination class="pagination-sm" total-items="viewOfSensors.length" ng-model="currentPage" items-per-page="popPageSize" max-size="9" boundary-links="true" rotate="false" num-pages="numPages" previous-text="上页" next-text="下页" first-text="首页" last-text="末页"></uib-pagination>
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;">
            <button class="btn btn-primary" ng-click="Ok()">保存</button>
            <button class="btn btn-warning" ng-click="Cancel()">取消</button>
        </div>
    </div></script><script type="text/ng-template" id="UpdateAffirm.html"><div class="container-fluid" style="font-size: 14px">
        <div align="center" style="padding: 30;border-bottom: 1px solid #E5E5E5; min-height: 16;">
            <h3>确认修改计费仪表？</h3>
        </div>
        <div style="position: relative; padding: 15px 30px 0px 30px;" ng-if="addSensor.length">
            本次操作新增：
        </div>
        <div align="center" style="position: relative; padding: 15px 30px 0px 30px;">
            <div ng-repeat="s in addSensor">{{s.title}} ID:{{s.addrid}}</div>
        </div>
        <div style="position: relative; padding: 15px 30px 0px 30px;" ng-if="removeSensor.length">
            本次操作删除：
        </div>
        <div align="center" style="position: relative; padding: 15px 30px 0px 30px;">
            <div ng-repeat="s in removeSensor">名称:{{s.title}} ID:{{s.addrid}}</div>
        </div>
        <div align="center" style="position: relative; padding: 15px 30px 0px 30px;" class="mt30">
            <span ng-if="addSensor.length">共新增{{SelectedSensorsIDS.length}}个智能仪表,</span><span ng-if="removeSensor.length">共删除{{DeleteIDS.length}}个智能仪表，</span>是否确认操作？
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;border-bottom: 1px solid #E5E5E5; min-height: 16;">
            <button class="btn btn-primary" ng-click="Ok()">保存</button>
            <button class="btn btn-warning" ng-click="Cancel()">取消</button>
        </div>
    </div></script>