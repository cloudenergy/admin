<div class="row"><div class="col-xs-12 col-sm-12 adminBody"><div class="panel panel-default"><div class="panel-body"><form class="form-horizontal" role="form" name="form" ng-submit="$ctrl.submit()"><fieldset><div class="form-group container-fluid pb15" style="border-bottom: 1px solid #ddd"><a class="btn btn-warning" ui-sref="admin.billingservice.info"><span class="glyphicon glyphicon-chevron-left"></span> 计费策略</a></div><div class="form-group"><label for="inputName" class="col-sm-2 control-label">策略名称</label><div class="col-sm-8"><input type="text" required class="form-control" id="id" name="name" ng-model="$ctrl.serviceTitle"></div></div><div class="form-group"><label class="col-sm-2 control-label">价格设置</label><div class="col-sm-8"><label class="col-sm-1 col-sm-offset-7 text-right" style="line-height: 34px">￥</label><div class="col-sm-2"><input required class="form-control col-sm-5" type="number" ng-model="$ctrl.fixprice" step="0.00001" ng-disabled="$ctrl.timePrice"></div><div class="col-sm-2" style="line-height: 34px" ng-click="$ctrl.setSelectChecked('select',1)"><input class="ml10" type="checkbox" ng-model="$ctrl.advanced" id="advanced"><label for="advanced" class="ml5">高级</label></div></div></div><div class="form-group" ng-repeat="t in $ctrl.times" ng-if="$ctrl.advanced"><div class="col-sm-2 col-sm-offset-4"><input type="checkbox" id="fixprice" ng-model="$ctrl.timePrice" ng-show="$index===0"><label class="control-label ml5" for="fixprice" ng-show="$index===0">时间段设置</label></div><div class="form-group"><div class="col-sm-1 col-sm-pull-1"><select class="form-control hourFrom" ng-model="t.HourFrom" id="select" ng-disabled="!$ctrl.timePrice"><option ng-repeat="h in $ctrl.hours" ng-selected="{{h==t.HourFrom}}" value="{{h}}">{{h}}</option></select></div><span class="col-sm-pull-1 hour" style="line-height: 34px;float: left;position: relative">点 -</span><div class="col-sm-1 col-sm-pull-1"><select class="form-control hourTo" ng-model="t.HourTo" ng-disabled="!$ctrl.timePrice"><option ng-repeat="h in $ctrl.hours" ng-selected="{{h==t.HourTo}}" value="{{h}}">{{h}}</option></select></div><span class="col-sm-pull-1" style="line-height: 34px;float: left;position: relative">点</span><div class="col-sm-2 col-sm-pull-1"><label class="col-sm-4 text-right" style="line-height: 34px">￥</label><div class="col-sm-8"><input required class="form-control col-sm-5" ng-model="t.price" ng-disabled="!$ctrl.timePrice" step="0.00001" type="number"></div></div><div class="col-sm-1 col-sm-pull-1"><span class="glyphicon glyphicon-minus" ng-show="$ctrl.timePrice&&$index!=0&&$index!=1" ng-click="$ctrl.removeTime($index)" style="line-height: 34px"></span> <span class="glyphicon glyphicon-plus ml25" ng-show="$ctrl.timePrice&&$ctrl.times.length===$index+1" ng-click="$ctrl.addTime()" style="line-height: 34px"></span></div></div></div><div class="form-group" ng-if="$ctrl.advanced"><div class="col-sm-2 col-sm-offset-4" ng-click="$ctrl.day=!$ctrl.week"><input type="checkbox" id="week" ng-model="$ctrl.week"><label class="control-label ml5" for="week">星期设置</label></div><div class="row-fluid btn-group col-sm-offset-1"><button type="button" class="btn btn-default" ng-class="$ctrl.selectWeeks[$index] ? 'active':''" ng-click="$ctrl.SelectWeek($event, $index)" ng-disabled="$ctrl.day" ng-repeat="wk in $ctrl.weeks">{{wk.title}}</button></div></div><div class="form-group" ng-repeat="d in $ctrl.date" ng-if="$ctrl.advanced"><div class="col-sm-2 col-sm-offset-4"><input type="checkbox" id="day" ng-model="$ctrl.day" ng-click="$ctrl.week=!$ctrl.day" ng-show="$index===0"><label class="control-label ml5" ng-show="$index===0" ng-click="$ctrl.week=!$ctrl.day" for="day">日期设置</label></div><div class="col-sm-1 col-sm-offset-1"><select class="form-control month" ng-model="d.month" ng-disabled="$ctrl.week"><option ng-repeat="month in $ctrl.months" ng-selected="{{month==d.month}}" value="{{month}}">{{month}}</option></select></div><span style="line-height: 34px;float: left">月</span><div class="col-sm-1"><select class="form-control day" ng-model="d.day" ng-disabled="$ctrl.week"><option ng-repeat="d in $ctrl.days" ng-selected="{{d==d.day}}" value="{{d}}">{{d}}</option></select></div><span style="line-height: 34px;float: left">日</span><div class="col-sm-1"><span class="glyphicon glyphicon-minus" ng-show="$index!=0&&!$ctrl.week" ng-click="$ctrl.removeDate($index)" style="line-height: 34px"></span> <span class="glyphicon glyphicon-plus ml25" ng-show="$ctrl.date.length===$index+1&&!$ctrl.week" ng-click="$ctrl.addDate()" style="line-height: 34px"></span></div></div><div class="form-group"><label class="col-sm-2 control-label">作用仪表</label><div class="col-sm-2 col-sm-offset-5 text-right"><label class="control-label">当前关联<span ng-click="$ctrl.OnSelectSensor($event)" class="text-danger btn">{{$ctrl.equipments.length || $ctrl.equipments}}</span></label></div></div><div class="form-group container-fluid pb15"><div class="text-center"><button type="submit" class="btn btn-success"><span class="glyphicon glyphicon-ok"></span>&nbsp;保存</button></div></div></fieldset></form></div></div></div></div><script type="text/ng-template" id="modal-channelselect.html"><div class="container-fluid">
        <div align="center" style="padding: 30; border-bottom: 1px solid #E5E5E5; min-height: 16; ">
            <h3 ng-show="add">未关联智能仪表</h3>
            <h3 ng-show="!add">已关联智能仪表</h3>
        </div>
        <div class="row" style="margin: 10px 0 0 0; ">
            <div class="col-lg-6">
                <input type="text" class="form-control" id="input-customer-freq" placeholder="输入智能仪表ID或名称进行查询" ng-model="sensorSearchKey">
            </div>
            <div class="col-lg-2">
                <a class="btn btn-info" href="javascript:void(0)" ng-click="onSearchSensor($event)">
                    <span class="glyphicon glyphicon-search"></span> 查询
                </a>
            </div>
            <div class="col-lg-3 text-right pull-right">
                <a class="btn btn-success col-lg-5" href="javascript:void(0)" ng-click="OnSelectAll($event)">
                    <span class="glyphicon glyphicon-asterisk"></span>全选
                </a>
                <a class="btn btn-primary col-lg-6 ml5" href="javascript:void(0)" ng-click="UpdateViewOfSensors(undefined,'add')" ng-show="!add">
                    <span class="glyphicon glyphicon-asterisk"></span>添加仪表
                </a>
                <a class="btn btn-danger col-lg-6 ml5" href="javascript:void(0)" ng-click="UpdateViewOfSensors(undefined,'delete')" ng-show="add">
                    <span class="glyphicon glyphicon-asterisk"></span>删除仪表
                </a>
            </div>
        </div>
        <div align="center" style="position: relative; padding: 15px 30px 0px 30px;">
            <div class="row-fluid list-group">
                <a href="javascript:void(0)" class="list-group-item" ng-class="sensor.isEnable ? 'active':''" ng-click="SwitchSensor($event, sensor)" ng-repeat="sensor in viewOfSensors | startFrom: (currentPage-1) * popPageSize | limitTo: popPageSize">
                    <span ng-show="sensor.title">名称:</span>{{sensor.title}}&nbsp;{{sensor.channel}}&nbsp;<span ng-show="sensor.addrid">ID:</span>{{sensor.addrid}}
                </a>
            </div>
        </div>
        <div align="center">
            <uib-pagination class="pagination-sm" total-items="viewOfSensors.length" ng-model="currentPage" items-per-page="popPageSize" max-size="9" boundary-links="true" rotate="false" num-pages="numPages" previous-text="上页" next-text="下页" first-text="首页" last-text="末页"></uib-pagination>
        </div>
        <div style="margin-top: 15px; padding: 0px 20px 20px; text-align: center;">
            <button class="btn btn-danger" ng-click="Ok()" ng-show="!add">删除</button>
            <button class="btn btn-primary" ng-click="Ok()" ng-show="add">添加</button>
            <button class="btn btn-warning" ng-click="Cancel()">取消</button>
        </div>
    </div></script>