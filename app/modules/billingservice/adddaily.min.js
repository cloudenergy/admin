"use strict";angular.module("app").component("addDaily",{templateUrl:"app/modules/billingservice/adddaily.html?rev=a57d87ea48",controller:["$rootScope","$scope","$api","SweetAlert","$state",function(e,l,t,a,c){var i=this;i.annual=!0,i.effectGenre=[{title:"物业费",value:"PAYPROPERTY"},{title:"停车费",value:"PAYPARKING"},{title:"空调费",value:"PAYAIRCONDITIONER"}],i.effectGenre.selected={value:i.effectGenre[0].value},i.unit=[{title:"日",value:"DAY"},{title:"月",value:"MONTH"},{title:"户",value:"ONCE"}],i.unit.selected={value:i.unit[0].value},i.cycle=[{title:"年",value:"0"},{title:"半年",value:"2"},{title:"季度",value:"1"},{title:"月",value:"4"},{title:"日",value:"5"}],l.$watch("$ctrl.annual",function(){i.cycle.selected={value:i.annual&&i.cycle[0].value||i.cycle[3].value}}),i.submit=function(){t.packageplan.add({title:i.serviceTitle,project:e.Project.selected._id,rent:{mode:"ONCE"==i.unit.selected.value&&"FIX"||"AREA",price:parseInt(i.price),freq:i.unit.selected.value},type:i.effectGenre.selected.value,strategy:[{flag:parseInt(i.cycle.selected.value),month:"4"==i.cycle.selected.value?0:void 0,day:i.day&&parseInt(i.day),hour:"6"==i.cycle.selected.value?-1:8,minute:30,validfrom:"ONCE"!=i.unit.selected.value?!i.annual&&parseInt(i.from)||void 0:void 0,validto:"ONCE"!=i.unit.selected.value?!i.annual&&parseInt(i.to)||void 0:void 0}]},function(e){a.success("新增日常计费成功"),c.go("admin.billingservice.dailyinfo")})}}]});