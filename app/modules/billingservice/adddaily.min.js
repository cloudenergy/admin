angular.module("app").component("addDaily",{templateUrl:"app/modules/billingservice/adddaily.html?rev=1f4ba7c86c",controller:["$scope","$api","$state",function(e,l,t){var a=this;a.annual=!0,a.effectGenre=[{title:"物业费",value:"PAYPROPERTY"},{title:"停车费",value:"PAYPARKING"},{title:"空调费",value:"PAYAIRCONDITIONER"}],a.effectGenre.selected={value:a.effectGenre[0].value},a.unit=[{title:"日",value:"day"},{title:"月",value:"month"},{title:"户",value:"ONCE"}],a.unit.selected={value:a.unit[0].value},a.cycle=[{title:"年",value:"0"},{title:"半年",value:"2"},{title:"季度",value:"1"},{title:"月",value:"4"}],e.$watch("$ctrl.annual",function(){a.cycle.selected={value:a.annual&&a.cycle[0].value||a.cycle[3].value}}),a.submit=function(){l.packageplan.add({title:a.serviceTitle,project:EMAPP.Project.selected._id,rent:{mode:"ARER",price:parseInt(a.price),freq:a.unit.selected.value},type:a.effectGenre.selected.value,strategy:[{flag:parseInt(a.cycle.selected.value),month:"4"==a.cycle.selected.value?0:void 0,day:parseInt(a.day),hour:"6"==a.cycle.selected.value?-1:8,minute:0,validfrom:"ONCE"!=a.cycle.selected?!a.annual&&parseInt(a.from)||void 0:void 0,validto:"ONCE"!=a.cycle.selected?!a.annual&&parseInt(a.to)||void 0:void 0}]},function(e){a.packageID=e.result.id.toString(),a.packageID&&l.userpackage.add({project:EMAPP.Project.selected._id,packageid:a.packageID},function(){t.go("admin.billingservice.dailyinfo")})})}}]});