"use strict";angular.module("app").component("addDaily",{templateUrl:"app/modules/billingservice/adddaily.html?rev=a57d87ea48",controller:["$rootScope","$scope","$api","SweetAlert","$state","FEETYPE",function(e,l,t,a,c,i){var u=this;u.annual=!0,u.effectGenre=i,u.effectGenre.selected={value:u.effectGenre[0].value},u.unit=[{title:"日",value:"DAY"},{title:"月",value:"MONTH"},{title:"户",value:"ONCE"}],u.unit.selected={value:u.unit[0].value},u.cycle=[{title:"年",value:"0"},{title:"半年",value:"2"},{title:"季度",value:"1"},{title:"月",value:"4"},{title:"日",value:"5"}],l.$watch("$ctrl.annual",function(){u.cycle.selected={value:u.annual&&u.cycle[0].value||u.cycle[3].value}}),u.submit=function(){t.packageplan.add({title:u.serviceTitle,project:e.Project.selected._id,rent:{mode:"ONCE"==u.unit.selected.value&&"FIX"||"AREA",price:parseInt(u.price),freq:u.unit.selected.value},type:u.effectGenre.selected.value,strategy:[{flag:parseInt(u.cycle.selected.value),month:"4"==u.cycle.selected.value?0:void 0,day:u.day&&parseInt(u.day),hour:"6"==u.cycle.selected.value?-1:8,minute:30,validfrom:"ONCE"!=u.unit.selected.value?!u.annual&&parseInt(u.from)||void 0:void 0,validto:"ONCE"!=u.unit.selected.value?!u.annual&&parseInt(u.to)||void 0:void 0}]},function(e){a.success("新增日常计费成功"),c.go("admin.billingservice.dailyinfo")})}}]});