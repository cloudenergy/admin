"use strict";angular.module("app").component("addDaily",{templateUrl:"app/modules/billingservice/adddaily.html?rev=cc02b45bf8",controller:["$rootScope","$scope","$api","$state",function(e,l,t,a){var c=this;c.annual=!0,c.effectGenre=[{title:"物业费",value:"PAYPROPERTY"},{title:"停车费",value:"PAYPARKING"},{title:"空调费",value:"PAYAIRCONDITIONER"}],c.effectGenre.selected={value:c.effectGenre[0].value},c.unit=[{title:"日",value:"DAY"},{title:"月",value:"MONTH"},{title:"户",value:"ONCE"}],c.unit.selected={value:c.unit[0].value},c.cycle=[{title:"年",value:"0"},{title:"半年",value:"2"},{title:"季度",value:"1"},{title:"月",value:"4"}],l.$watch("$ctrl.annual",function(){c.cycle.selected={value:c.annual&&c.cycle[0].value||c.cycle[3].value}}),c.submit=function(){t.packageplan.add({title:c.serviceTitle,project:e.Project.selected._id,rent:{mode:"AREA",price:parseInt(c.price),freq:c.unit.selected.value},type:c.effectGenre.selected.value,strategy:[{flag:parseInt(c.cycle.selected.value),month:"4"==c.cycle.selected.value?0:void 0,day:parseInt(c.day),hour:"6"==c.cycle.selected.value?-1:8,minute:0,validfrom:"ONCE"!=c.cycle.selected?!c.annual&&parseInt(c.from)||void 0:void 0,validto:"ONCE"!=c.cycle.selected?!c.annual&&parseInt(c.to)||void 0:void 0}]},function(l){c.packageID=l.result.id.toString(),c.packageID&&t.userpackage.add({project:e.Project.selected._id,packageid:c.packageID}).$promise.finally(function(){a.go("admin.billingservice.dailyinfo")})})}}]});