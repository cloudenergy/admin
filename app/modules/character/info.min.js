"use strict";angular.module("app").controller("characterInfo",["$rootScope","$scope","$api","Auth","$cookies","UI",function(e,a,r,c,t,n){a.operateStatus={manage:{isEnable:!1,url:"/manage"},delete:{isEnable:!1,url:"/delete"}},a.askingRemoveID=void 0,a.MaxLevel=0,c.Check(a.operateStatus,function(){r.character.info(function(e){e.err||(a.characters=e.result,a.MaxLevel=a.characters.length-1)}),a.DoRemove=function(e,c,t){e.preventDefault();var l=n.GetAbsoluteIndex(a.currentPage,t);r.character.delete({id:c},function(){a.characters.splice(l,1)},function(e){n.AlertError(e.message)})},a.AskForRemove=function(e,r){e.preventDefault(),a.askingRemoveID=r},a.CancelRemove=function(e){e.preventDefault(),a.askingRemoveID=void 0},a.$watch("currentPage",function(e){return e?void n.PutPageIndex(void 0,a.currentPage):void(a.currentPage=n.GetPageIndex())}),a.onLevelUp=function(e,c,t){e.preventDefault();var n=a.characters[t-1];a.characters[t-1].level++,a.characters[t].level--,a.characters[t-1]=a.characters[t],a.characters[t]=n,r.character.update({_id:a.characters[t]._id,level:a.characters[t].level}),r.character.update({_id:a.characters[t-1]._id,level:a.characters[t-1].level})},a.onLevelDown=function(e,c,t){e.preventDefault();var n=a.characters[t+1];a.characters[t+1].level--,a.characters[t].level++,a.characters[t+1]=a.characters[t],a.characters[t]=n,r.character.update({_id:a.characters[t]._id,level:a.characters[t].level}),r.character.update({_id:a.characters[t+1]._id,level:a.characters[t+1].level})},a.adminUser=t.user})}]);