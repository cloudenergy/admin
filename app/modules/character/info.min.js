"use strict";angular.module("app").controller("characterInfo",["$scope","$api","$cookies","Auth","UI",function(e,a,r,c,t){e.operateStatus={manage:{isEnable:!1,url:"/manage"},delete:{isEnable:!1,url:"/delete"}},e.askingRemoveID=void 0,e.MaxLevel=0,c.Check(e.operateStatus,function(){a.character.info(function(a){e.characters=a.result,e.MaxLevel=e.characters.length-1}),e.DoRemove=function(r,c,n){r.preventDefault();var l=t.GetAbsoluteIndex(e.currentPage,n);a.character.delete({id:c},function(){e.characters.splice(l,1)},function(e){t.AlertError(e.message)})},e.AskForRemove=function(a,r){a.preventDefault(),e.askingRemoveID=r},e.CancelRemove=function(a){a.preventDefault(),e.askingRemoveID=void 0},e.$watch("currentPage",function(a){return a?void t.PutPageIndex(void 0,e.currentPage):void(e.currentPage=t.GetPageIndex())}),e.onLevelUp=function(r,c,t){r.preventDefault();var n=e.characters[t-1];e.characters[t-1].level++,e.characters[t].level--,e.characters[t-1]=e.characters[t],e.characters[t]=n,a.character.update({_id:e.characters[t]._id,level:e.characters[t].level}),a.character.update({_id:e.characters[t-1]._id,level:e.characters[t-1].level})},e.onLevelDown=function(r,c,t){r.preventDefault();var n=e.characters[t+1];e.characters[t+1].level--,e.characters[t].level++,e.characters[t+1]=e.characters[t],e.characters[t]=n,a.character.update({_id:e.characters[t]._id,level:e.characters[t].level}),a.character.update({_id:e.characters[t+1]._id,level:e.characters[t+1].level})},e.adminUser=r.user})}]);