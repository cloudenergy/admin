"use strict";angular.module("app").controller("accountInfo",["$scope","$api","SweetAlert","$uibModal",function(e,n,c,t){e.askingRemoveID=void 0,e.currentPage=1,e.getAccounts=function(){n.account.info({key:e.searchKey,pageindex:e.currentPage||1,pagesize:15},function(n){e.accounts=n.result},function(e){!/90000005|90000007/.test(e.code)&&c.error(e)})},e.DoRemove=function(t,o,a){t.preventDefault(),n.account.delete({id:o},function(){e.accounts.accounts.splice(a,1)},c.error)},e.AskForRemove=function(n,c){n.preventDefault(),e.askingRemoveID=c},e.CancelRemove=function(n){n.preventDefault(),e.askingRemoveID=void 0},e.$watch("currentPage",function(n){if(!n)return void e.getAccounts();e.getAccounts()}),e.onSearch=function(){e.getAccounts()},e.accountChange=function(e,o){var a={mobile:"mobileChange.html",title:"titleChange.html",email:"emailChange.html"};t.open({size:"sm",templateUrl:a[o],controller:["$scope","$uibModalInstance",function(t,o){t.account=angular.copy(e),t.title=t.account.title,t.ok=function(){n.account.update(t.account,function(){angular.extend(e,t.account),c.success("更新成功")},c.error),t.OnCancel=o.dismiss("cancel")},t.cancel=function(){t.OnCancel=o.dismiss("cancel")}}]})}}]);