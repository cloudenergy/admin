<div class="panel panel-default mb0 layout-column single-edit"><div class="panel-body flex-initial"><form class="form-inline pb10 bb" ng-submit="$ctrl.list()"><div class="input-group w300"><input type="text" class="form-control" placeholder="ID/名称" ng-model="$ctrl.searchKey"> <span class="input-group-btn"><button type="submit" class="btn"><i class="glyphicon glyphicon-search"></i></button></span></div><div class="pull-right pt7 pr15"><a class="btn-link" ui-sref="admin.account.create" ng-show="$root.Rule.admin.account.create">新建</a></div></form></div><div class="panel-body flex overflow-auto pt0 pb0"><table class="table table-bordered table-hover mb0"><thead class="centerTable"><tr><th>帐号</th><th>名称</th><th>权限级别</th><th>手机号</th><th>邮箱</th><th>最后登录时间</th><th class="w200">操作</th></tr></thead><tbody class="centerTable"><tr ng-repeat="item in $ctrl.listData.accounts"><td>{{item._id || '-'}}</td><td class="row-title">{{item.title || '-'}} <a class="glyphicon glyphicon-pencil td-row-edit" popover-is-open="$ctrl.popover.target._id == item._id && $ctrl.popover.field == 'title'" uib-popover-template="'account-info-change-target.html'" popover-title="编辑名称" popover-placement="bottom" ng-click="$ctrl.popover.openChange(item,'title')"></a></td><td>{{item.character && item.character.title || '未知'}}</td><td>{{item.mobile || '-'}} <a class="glyphicon glyphicon-pencil td-row-edit" popover-is-open="$ctrl.popover.target._id == item._id && $ctrl.popover.field == 'mobile'" uib-popover-template="'account-info-change-target.html'" popover-title="编辑手机号" popover-placement="bottom" ng-click="$ctrl.popover.openChange(item,'mobile');"></a></td><td>{{item.email || '-'}} <a class="glyphicon glyphicon-pencil td-row-edit" popover-is-open="$ctrl.popover.target._id == item._id && $ctrl.popover.field == 'email'" uib-popover-template="'account-info-change-target.html'" popover-title="编辑邮箱" popover-placement="bottom" ng-click="$ctrl.popover.openChange(item,'email');"></a></td><td>{{item.lastlogin && (item.lastlogin*1000|date:'yyyy-MM-dd HH:mm:ss') || '-'}}</td><td><a class="btn-link mr10" ui-sref="admin.account.roleres({id:item._id})" ng-show="$root.Rule.admin.account.roleres">权限资源</a> <a class="btn-link mr10" ui-sref="admin.account.edit({id:item._id})" ng-show="$root.Rule.admin.account.edit">编辑</a> <a class="btn-link" ng-click="$ctrl.askingRemoveID = item._id" ng-show="$ctrl.askingRemoveID != item._id && $root.Rule.admin.account.delete">删除</a> <a class="btn-link mr10" ng-click="$ctrl.askingRemoveID = undefined" ng-show="$ctrl.askingRemoveID == item._id">取消</a> <a class="btn-link" ng-click="$ctrl.DoRemove(item._id)" ng-show="$ctrl.askingRemoveID == item._id">确定</a></td></tr></tbody></table></div><div class="panel-body flex-initial"><div class="pt15 bt"><div class="pull-right"><span class="inline fs34" style="vertical-align:top">总共{{$ctrl.listData.paging.count || 0}}条</span><ul uib-pagination class="mt0 mb0 ml10" ng-model="$ctrl.currentPage" ng-change="$ctrl.list()" total-items="$ctrl.listData.paging.count || 0" items-per-page="$ctrl.listData.paging.pagesize" max-size="10" boundary-links="true" rotate="false" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></ul></div></div></div></div><script type="text/ng-template" id="account-info-change-target.html"><div class="modal-body text-center w300">
        <input type="text" class="form-control" ng-model="$ctrl.popover.target[$ctrl.popover.field]" auto-focus>
    </div>
    <div class="modal-footer text-center">
        <button class="btn btn-sm btn-primary mr5" ng-click="$ctrl.popover.ok()">修改</button>
        <button class="btn btn-sm btn-default" ng-click="$ctrl.popover.close()">取消</button>
    </div></script>