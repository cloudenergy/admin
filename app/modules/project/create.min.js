"use strict";angular.module("app").component("projectCreate",{templateUrl:"app/modules/project/create.html?rev=43b05b2c03",controller:["$state","$api","ATTRIB","SOURCE","Upload","base64","SweetAlert",function(e,t,o,n,u,i,r){var a=this;a.ondutyHour=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],a.ondutyHour.selected="08",a.ondutyMinute=["00","10","20","30","40","50"],a.ondutyMinute.selected="00",a.offdutyHour=angular.copy(a.ondutyHour),a.offdutyHour.selected="17",a.offdutyMinute=angular.copy(a.ondutyMinute),a.offdutyMinute.selected="00",a.ATTRIB=o,a.SOURCE=n,a.messagePush={},a.uploadImg={upload:function(){angular.isUndefined(a.file[0].key)&&angular.isUndefined(a.file[0].$upload)&&(a.file[0].$upload=1,u.base64DataUrl(a.file[0]).then(function(e){a.file[0].__proto__.$base64=1,t.interaction.uploadtoken({file:(new Date).getTime()+"_"+a.file[0].name},function(o){t.qiniu.upload({base64:i.encode(o.result.file),token:o.result.token},{file:e.split("data:image/jpeg;base64,")[1]},function(e){a.file[0].key=e.key,angular.forEach(a.file[0],function(e,t){/^\$/.test(t)&&delete a.file[0][t]})})})}))},delete:function(){r.swal({title:"确定删除该图片吗？",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确认"}).then(function(){t.interaction.remove({file:a.file[0].key},function(){a.file.splice(0,1)})})}},a.submit=function(){return a.project.sector?a.project.source?a.project.user.length<6?void r.warning("帐号不能低于6位"):!a.project.passwd||a.project.passwd.length<6?void r.warning("密码不能低于6位"):(a.project.avatar=a.file[0].key,a.project.character="TENEMENTADMIN",a.project.message=Object.keys(a.messagePush).filter(function(e){return a.messagePush[e]?e:""}).join(","),a.project.onduty=a.ondutyHour.selected+":"+a.ondutyMinute.selected,a.project.offduty=a.offdutyHour.selected+":"+a.offdutyMinute.selected,void t.project.add(a.project,function(){r.success("创建成功"),e.go("admin.project.info")},function(e){r.error(e)})):void r.warning("请选择项目来源"):void r.warning("请选择项目行业")}}]});