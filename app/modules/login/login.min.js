"use strict";angular.module("app").controller("login",["$scope","$state","UI","md5","User",function(e,r,t,o,a){e.user=localStorage.user,e.$watch("rememberaccount",function(){e.rememberaccount||(e.remember=e.rememberaccount)}),e.$watch("remember",function(){e.remember&&(e.rememberaccount=e.remember)}),e.login=function(){var m=this&&this.user,c=this&&this.password,s=[];e.rememberaccount&&(localStorage.user=m),!m&&s.push("帐号"),!c&&s.push("密码"),s=s.join("与"),s&&t.AlertError("请输入您的"+s),!s&&a.$login({user:m,passwd:o.createHash(c).toUpperCase(),remember:e.remember}).then(function(){r.go(r.prev.state||"admin.dashboard",r.prev.params||{},{location:"replace"})},t.AlertError)}}]);