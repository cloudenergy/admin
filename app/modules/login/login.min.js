"use strict";angular.module("app").controller("login",["$scope","$state","UI","md5","User",function(e,r,t,o,a){e.user=localStorage.user,e.$watch("rememberaccount",function(){e.rememberaccount?"":e.remember=e.rememberaccount}),e.$watch("remember",function(){e.remember?e.rememberaccount=e.remember:""}),e.login=function(){var m=this&&this.user,s=this&&this.password,c=[];e.rememberaccount?localStorage.user=m:"",!m&&c.push("帐号"),!s&&c.push("密码"),c=c.join("与"),c&&t.AlertError("请输入您的"+c),!c&&a.$login({user:m,passwd:o.createHash(s).toUpperCase(),remember:e.remember}).then(function(){r.go(r.prev.state||"admin.dashboard",r.prev.params||{},{location:"replace"})},function(e){t.AlertError(e.message,"登录失败")})}}]);