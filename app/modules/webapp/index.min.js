"use strict";angular.module("app").component("webappIndex",{templateUrl:"app/modules/webapp/index.html?rev=4cb89fd7c7",bindings:{project:"<"},controller:["$ocLazyLoad","$uibModal","$api",function(e,t,o){var a=this,n={icons:"//at.alicdn.com/t/font_xqmv3kvf6dh1tt9.css",basic:[{state:"app.device",icon:"em-addons addon-control",iconColor:"green-50",bgColor:"green-500",label:"仪表控制",sort:1},{state:"app.fee",icon:"em-addons addon-order",iconColor:"deep-purple-50",bgColor:"deep-purple-500",label:"消耗帐单",sort:2},{state:"app.recharge",icon:"em-addons addon-recharge",iconColor:"deep-orange-50",bgColor:"deep-orange-500",label:"账户充值",sort:3},{state:"app.account",icon:"em-addons addon-my",iconColor:"light-blue-50",bgColor:"light-blue-500",label:"我的信息",sort:4}],third:[{target:"https://city.weixin.qq.com/wx/home2?exportkey=AcVdsGyKWwCSe2VTci2hiWY%3D&pass_ticket=aGIXZ0N19FJYGfZJKDhgW%2BLyHoGa734lilzj70DYfwXa4SOBOTyXkuc19H0LLj8u",icon:"em-addons addon-cityservice",iconColor:"blue-400",label:"城市服务",sort:1},{target:"https://common.diditaxi.com.cn/general/webEntry?wx=true",icon:"em-addons addon-didichuhang",iconColor:"orange-500",label:"滴滴出行",sort:2},{target:"http://wx.17u.cn/home/index.html?code=021v5Obw02GQgf1YKsaw0llobw0v5ObW&state=123",icon:"em-addons addon-huoche",iconColor:"green-500",label:"火车票机票",sort:3},{target:"http://x.elong.com/hotelwxqb/index/?code=0&cityid=1201",icon:"em-addons addon-jiudian",iconColor:"blue-500",label:"酒店",sort:4},{state:"app.repair",icon:"em-addons addon-repair",iconColor:"green-500",label:"维修服务",sort:5},{target:"http://m.nfsq.com.cn/h5/index.html",icon:"em-addons addon-bottled-water",iconColor:"light-green-500",label:"送水服务",sort:6},{target:"https://m.kuaidi100.com",icon:"em-addons addon-express",iconColor:"pink-500",label:"快递服务",sort:7},{target:"http://dianhua.118114.cn:8088/yp114/index.do?channelno=211&type=0&cityName=%e6%9d%ad%e5%b7%9e",icon:"em-addons addon-tele",iconColor:"orange-500",label:"电话服务",sort:8},{target:"http://i.meituan.com",icon:"em-addons addon-catering",iconColor:"orange-500",label:"餐饮",sort:9},{target:"https://jzt.daojia.com/h5/thirdPartyBj/xiaoshigong",icon:"em-addons addon-clean-keeping",iconColor:"blue-500",label:"保洁",sort:10},{target:"http://www.flowermm.net/product/2",icon:"em-addons addon-flower",iconColor:"pink-500",label:"花卉",sort:11},{target:"http://m.loveoffice.com.cn",icon:"em-addons addon-fitment",iconColor:"light-green-500",label:"装修",sort:12},{target:"http://zjzzy.bama555.com/cate?id=5673e2ac45cac043",icon:"em-addons addon-rent",iconColor:"light-green-500",label:"租赁",sort:13},{target:"http://vmall.360kad.com/Category/all.shtml?utm_medium=refer&utm_source=publicno&utm_domain=quicksearch",icon:"em-addons addon-medicine-chest",iconColor:"pink-500",label:"药店",sort:14},{target:"http://www.wmalle.com/webapp/merchant/brandList.do?accountId=40&response_type=code&scope=snsapi_userinfo&state=1",icon:"em-addons addon-bussiness",iconColor:"green-500",label:"办公商圈",sort:15},{target:"http://wq.jd.com/mcoss/mportal/show?tabid=12&tpl=12&PTAG=17053.1.1&utm_source=weixin&utm_medium=weixin&utm_campaign=t_1000072672_17053_001",icon:"em-addons addon-market",iconColor:"blue-500",label:"超市",sort:16}]};angular.extend(a,{$onChanges:function(e){e.project&&e.project.currentValue&&a.info()},templates:[{id:1,name:"默认（天气、主应用、第三方应用）",template:"index-tmpl-default.html"}],loadCss:function(){e.load(a.template.icons)},info:function(){o.apptemplate.info({projectid:a.project._id},function(e){a.template=e.result.content&&angular.fromJson(e.result.content)||n,angular.forEach(a.templates,function(t){angular.equals(t.template,e.result.template)&&(a.templates.selected=t)})},function(){a.template=n,a.templates.selected=a.templates[0]}).$promise.finally(a.loadCss)},detail:function(e,o,n){a.template[o]=a.template[o]||[],t.open({templateUrl:"app/modules/webapp/modal.html?rev=6a7dca2f39",controllerAs:"$ctrl",controller:["$uibModalInstance",function(e){angular.extend(this,{isAdd:!n,app:n||{},basic:"basic"===o,submit:e.close,cancel:e.dismiss})}]}).result.then(function(e){!n&&a.template[o].push(e),a.update()})},update:function(){o.apptemplate.update({projectid:a.project._id,template:a.templates.selected.template,content:angular.toJson(a.template)}).$promise.finally(a.loadCss)},remove:function(e,t){angular.forEach(a.template[t],function(e){!e.delete&&this.push(e)},a.template[t]=[]),a.update()},clean:function(){swal({title:"确定要清空该项目的配置吗？",type:"warning",showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确认"},function(){o.apptemplate.delete({projectid:a.project._id}).$promise.finally(function(){a.template=n})})}})}]});