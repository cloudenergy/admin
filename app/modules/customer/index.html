<div class="panel panel-default mb0 layout-column"><div class="panel-body flex-initial pb0"><div class="pull-right pt8 pr15 mb10"><a class="btn-link" ng-click="$ctrl.addnode('root')">添加根节点</a></div></div><div class="panel-body flex overflow-auto pt0 pb0"><table class="table table-bordered table-hover mb0 table-node"><thead><tr><td class="col-sm-3">属性名</td><td class="col-sm-4">仪表关联</td><td class="col-sm-3">操作</td></tr></thead><tbody><tr ng-repeat="item in $ctrl.listData[0].nodes"><td colspan="4" class="table-td"><div class="col-sm-12 table-row" ng-click="item.showChildren=!item.showChildren;"><div class="col-sm-3"><span ng-if="item.id&&!item.edit">{{item.title}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!item.id||item.edit" type="text" ng-model="item.title"></div><div class="col-sm-2 col-sm-offset-5" ng-if="item.id"><a class="text-blue" ng-if="!item.edit" ng-click="item.edit=true;$event.stopPropagation();">编辑</a><a class="text-blue" ng-if="item.edit==true" ng-click="item.edit=false;$ctrl.save('root',item,'UPDATE','NODE');$event.stopPropagation();">保存</a><a class="text-blue ml10" ng-if="item.edit==true" ng-click="item.edit=false;$event.stopPropagation();">取消</a><a class="text-blue ml10" ng-click="$ctrl.delete(item);$event.stopPropagation();">删除</a></div><div class="col-sm-2 col-sm-offset-5" ng-if="!item.id"><a class="text-blue" ng-click="$ctrl.save('root',item,'ADD','NODE')">保存</a><a class="text-blue ml10" ng-click="$ctrl.cancel($ctrl.listData[0].nodes,$index)">取消</a></div></div><div class="col-sm-12 table-child" style="padding-left: 10px!important" ng-if="item.showChildren" ng-repeat="child in item.nodes"><div class="col-sm-8" ng-click="child.showGrandchildren=!child.showGrandchildren"><span ng-if="child.id&&!child.edit">{{child.title}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!child.id||child.edit" type="text" ng-model="child.title"></div><div class="col-sm-2" ng-click="child.showGrandchildren=!child.showGrandchildren" ng-if="!child.id"><a class="text-blue" ng-click="$ctrl.save('child',child,'ADD','NODE');$event.stopPropagation();">保存</a><a class="text-blue ml10" ng-click="$ctrl.cancel(item.nodes,$index);$event.stopPropagation();">取消</a></div><div class="col-sm-2" ng-click="child.showGrandchildren=!child.showGrandchildren" ng-if="child.id"><a class="text-blue" ng-if="!child.edit" ng-click="child.edit=true;$event.stopPropagation();">编辑</a><a class="text-blue" ng-if="child.edit==true" ng-click="child.edit=false;$ctrl.save('child',child,'UPDATE','NODE');$event.stopPropagation();">保存</a><a class="text-blue ml10" ng-if="child.edit==true" ng-click="child.edit=false;$event.stopPropagation();">取消</a><a class="text-blue ml10" ng-click="$ctrl.delete(child,item);$event.stopPropagation();">删除</a></div><div class="col-sm-12 table-grandchild" style="padding-left: 10px!important" ng-if="child.showGrandchildren" ng-repeat="node in child.nodes"><div class="col-sm-3"><span ng-if="node.id&&!node.edit">{{node.title}}</span><input class="form-control" ng-click="$event.stopPropagation();" ng-if="!node.id||node.edit" type="text" ng-model="node.title"></div><div class="col-sm-5">{{node.sensorName}}<a class="glyphicon glyphicon-link" ng-click="$ctrl.changeSensor(node)"></a></div><div class="col-sm-2" ng-if="!node.id"><a class="text-blue" ng-click="$ctrl.save('child',node,'ADD','DEV');">保存</a><a class="text-blue ml10" ng-click="$ctrl.cancel(child.nodes,$index)">取消</a></div><div class="col-sm-2" ng-if="node.id"><a class="text-blue" ng-if="!node.edit" ng-click="node.edit=true;">编辑</a><a class="text-blue" ng-if="node.edit==true" ng-click="node.edit=false;$ctrl.save('child',node,'UPDATE','DEV')">保存</a><a class="text-blue ml10" ng-if="node.edit==true" ng-click="node.edit=false">取消</a><a class="text-blue ml10" ng-click="$ctrl.delete(node,child)">删除</a></div></div><div class="col-sm-12 table-grandchild" ng-if="child.showGrandchildren&&child.id"><div class="col-sm-2 col-sm-offset-8"><a class="text-blue" ng-click="$ctrl.addnode('child',child)">添加</a></div></div></div><div class="col-sm-12 table-child" ng-if="item.showChildren&&item.id"><div class="col-sm-2 col-sm-offset-8"><a class="text-blue" ng-click="$ctrl.addnode('child',item)">添加</a></div></div></td></tr></tbody></table></div><div class="panel-body flex-initial pt0"></div></div>