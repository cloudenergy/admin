"use strict";angular.module("app").component("customerSensor",{templateUrl:"app/modules/customer/sensor.html?rev=d391fdc3ed",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$api",function(e){var n,t=this,i=function(){e.sensor.info({project:t.resolve.projectid,key:t.sensorSearchKey,devicetype:t.devicetype.selected,pageindex:t.currentPage},function(e){angular.forEach(t.listData=e.result.detail||[],function(e){e.isEnable=!!t.resolve.selected[e.did]}),t.pagingCount=e.result.paging.count})};t.SwitchSensor=function(e,n){e.isEnable=n,angular.isNumber(t.resolve.selected[e.did])?t.resolve.selected[e.did]=e.isEnable?1:0:e.isEnable?t.resolve.selected[e.did]=e.title:delete t.resolve.selected[e.did]},t.OnSearch=function(e){(e||!angular.equals(n,t.sensorSearchKey))&&i(),n=t.sensorSearchKey},t.SelectAll=function(){angular.forEach(t.listData,function(e){t.SwitchSensor(e,!0)})},t.AntiElection=function(){angular.forEach(t.listData,function(e){t.SwitchSensor(e,!e.isEnable)})},t.currentPage=1,t.pageChanged=i,t.devicetype=[{id:void 0,name:"全部类型"}],t.devicetype.select=i,t.$onInit=function(){e.device.type({project:t.resolve.projectid},function(e){angular.forEach(e.result,function(e){t.devicetype[e.id]=e,t.devicetype.push(e)})}),i()},t.Ok=function(){t.close({$value:t.resolve.selected})},t.Cancel=function(){t.dismiss()}}]});