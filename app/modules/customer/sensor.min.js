"use strict";angular.module("app").component("sensor",{templateUrl:"app/modules/byitem/sensor.html?rev=99cdf99791",bindings:{resolve:"<",close:"&",dismiss:"&"},controller:["$api","$timeout",function(e,n){var i,t=this,s=function(){e.sensor.info({project:t.resolve.projectid,key:t.sensorSearchKey,devicetype:t.devicetype.selected,pageindex:t.currentPage},function(e){angular.forEach(t.listData=e.result.detail||[],function(e){angular.forEach(t.resolve.selected,function(n){e.did==n.key&&(e.isEnable=e.originisEnable=!0,e.switch=!1)}),e.did==t.resolve.selected.key&&(e.isEnable=!0)}),t.pagingCount=e.result.paging.count})};t.SwitchSensor=function(e,n){e.isEnable=!e.isEnable,e.isEnable==e.originisEnable&&(e.switch=!1)||(e.switch=!0)},t.OnSearch=function(e){(e||!angular.equals(i,t.sensorSearchKey))&&s(),i=t.sensorSearchKey},t.currentPage=1,t.pageChanged=s,t.devicetype=[{id:void 0,name:"全部类型"}],t.devicetype.select=s,t.$onInit=function(){e.device.type({project:t.resolve.projectid},function(e){angular.forEach(e.result,function(e){t.devicetype[e.id]=e,t.devicetype.push(e)})}),s()},t.Ok=function(){t.selected=[],angular.forEach(t.listData,function(e){e.isEnable&&e.switch&&t.selected.push(e)}),t.close({$value:t.selected})},t.Cancel=function(){t.dismiss()}}]});