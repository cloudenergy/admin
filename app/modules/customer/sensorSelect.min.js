angular.module("app").controller("SensorSelect",["$scope","$rootScope","$uibModalInstance","$api","ProjectID","SelectKEY",function(e,n,i,a,o,r){var c,s,t=function(){a.sensor.info({project:o,keyreg:e.sensorSearchKey,pageindex:e.currentPage,pagesize:n.popPageSize},function(n){angular.forEach(c=n.result.detail||[],function(e){c[e.id]=e.id}),e.pagingCount=n.result.paging.count,e.UpdateViewOfSensors()})};e.currentPage=1,e.Submit=function(){i.close(r)},e.Cancel=function(){i.dismiss("cancel")},e.switchSensor=function(e,n){(e.isEnable=n||!e.isEnable)?0===r[e.id]?r[e.id]=1:angular.isUndefined(r[e.id])&&(r[e.id]=e.title):1===r[e.id]?r[e.id]=0:delete r[e.id]},e.searchSensor=function(n){(n||!angular.equals(s,e.sensorSearchKey))&&t(),s=e.sensorSearchKey},e.selectAll=function(){angular.forEach(e.viewOfSensors,function(n){e.switchSensor(n,!0)})},e.invertSelect=function(){angular.forEach(e.viewOfSensors,function(n){e.switchSensor(n,!1)})},e.UpdateViewOfSensors=function(n){e.viewOfSensors=[],angular.forEach(c,function(i){i.isEnable=!!r[i.id],(angular.isUndefined(n)||i.id.match(n)||i.title.match(n))&&e.viewOfSensors.push(i)})},e.$watch("currentPage",t)}]);