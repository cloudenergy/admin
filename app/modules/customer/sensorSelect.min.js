"use strict";angular.module("app").controller("SensorSelect",["$scope","$rootScope","$uibModalInstance","$api","ProjectID","SelectKEY",function(e,n,i,a,o,s){var r,t,c=function(){a.sensor.info({project:o,keyreg:e.sensorSearchKey,pageindex:e.currentPage,pagesize:e.popPageSize},function(n){angular.forEach(r=n.result.detail||[],function(e){r[e.id]=e.id}),e.pagingCount=n.result.paging.count,e.UpdateViewOfSensors()})};e.currentPage=1,e.popPageSize=8,e.Submit=function(){i.close(s)},e.Cancel=function(){i.dismiss("cancel")},e.switchSensor=function(e,n){e.isEnable=n||!e.isEnable,e.isEnable?0===s[e.id]?s[e.id]=1:angular.isUndefined(s[e.id])&&(s[e.id]=e.title):1===s[e.id]?s[e.id]=0:delete s[e.id]},e.searchSensor=function(n){(n||!angular.equals(t,e.sensorSearchKey))&&c(),t=e.sensorSearchKey},e.selectAll=function(){angular.forEach(e.viewOfSensors,function(n){e.switchSensor(n,!0)})},e.invertSelect=function(){angular.forEach(e.viewOfSensors,function(n){e.switchSensor(n,!1)})},e.UpdateViewOfSensors=function(n){e.viewOfSensors=[],angular.forEach(r,function(i){i.isEnable=!!s[i.id],(angular.isUndefined(n)||i.id.match(n)||i.title.match(n))&&e.viewOfSensors.push(i)})},e.$watch("currentPage",c)}]);