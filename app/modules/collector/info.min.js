"use strict";angular.module("app").controller("CollectorIndex",["$rootScope","$scope","$api","UI","$uibModal",function(e,t,o,c,n){t.currentPage=1,t.pageSize=15,t.askingRemoveID=void 0,t.DoRemove=function(e,n,i){e.preventDefault(),o.collector.delete({id:n},function(){t.items.splice(t.pageSize*(t.currentPage-1)+i,1)},c.AlertError)},t.AskForRemove=function(e,o){e.preventDefault(),t.askingRemoveID=o},t.CancelRemove=function(e){e.preventDefault(),t.askingRemoveID=void 0},t.switchStatus=function(c,i){i.preventDefault(),n.open({templateUrl:"modal-collectorStatus.html",size:"md",resolve:{collector:function(){return t.items}},controller:["$scope","$uibModalInstance","collector",function(t,n,i){t.item=c,t.ok=function(){o.collector.status({id:c._id,projectid:e.Project.selected._id,status:"ONLINE"==c.status&&"DEBUG"||"ONLINE"},function(){o.collector.info({project:e.Project.selected._id},function(e){i=e.result,n.close(i)})},function(){n.close(i)})},t.cancel=function(){n.dismiss("cancel")}}]}).result.then(function(e){t.items=e,angular.forEach(t.items,function(e){"ONLINE"==e.status?e.switch=!0:e.switch=!1})},function(){})},t.$watch("$root.Project.selected",function(){o.collector.info({project:e.Project.selected._id},function(e){t.items=e.result,angular.forEach(t.items,function(e){"ONLINE"==e.status?e.switch=!0:e.switch=!1})},function(){delete t.items})})}]);