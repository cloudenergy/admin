"use strict";angular.module("app").controller("CollectorIndex",["$scope","$api","Auth","UI",function(e,t,n,o){e.operateStatus={create:{isEnable:!1,url:"/create"},delete:{isEnable:!1,url:"/delete"},edit:{isEnable:!1,url:"/edit"}},e.currentPage=1,e.askingRemoveID=void 0,n.Check(e.operateStatus,function(){e.DoRemove=function(n,r,c){n.preventDefault();var a=o.GetAbsoluteIndex(e.currentPage,c);t.collector.delete({id:r},function(){e.items.splice(a,1)},function(e){o.AlertError(e.message)})},e.AskForRemove=function(t,n){t.preventDefault(),e.askingRemoveID=n},e.CancelRemove=function(t){t.preventDefault(),e.askingRemoveID=void 0},e.$watch("Project.selected",function(){t.collector.info({project:e.Project.selected._id},function(t){e.items=t.result})}),e.$watch("currentPage",function(t){return t?void o.PutPageIndex(void 0,e.currentPage):void(e.currentPage=o.GetPageIndex())})})}]);