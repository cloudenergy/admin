"use strict";angular.module("app").controller("CollectorIndex",["$rootScope","$scope","$api","UI","$uibModal",function(e,t,c,o,l){t.currentPage=1,t.pageSize=15,t.askingRemoveID=void 0,t.DoRemove=function(e,l,n){e.preventDefault(),c.collector.delete({id:l},function(){t.items.splice(t.pageSize*(t.currentPage-1)+n,1)},o.AlertError)},t.AskForRemove=function(e,c){e.preventDefault(),t.askingRemoveID=c},t.CancelRemove=function(e){e.preventDefault(),t.askingRemoveID=void 0},t.switchStatus=function(t,o){o.preventDefault(),l.open({templateUrl:"modal-collectorStatus.html",size:"md",controller:["$scope","$uibModalInstance",function(o,l){o.item=angular.copy(t),o.ok=function(){c.collector.status({id:t._id,projectid:e.Project.selected._id,status:"ONLINE"==t.status&&"DEBUG"||"ONLINE"},function(){t.status="ONLINE"==o.item.status&&"DEBUG"||"ONLINE",l.dismiss("cancel")},function(){l.dismiss("cancel")})},o.cancel=function(){l.dismiss("cancel")}}]})},t.multiCheck=function(e){"all"===e?(t.multiCheck.all&&(t.showButton=!0),!t.multiCheck.all&&(t.showButton=!1),angular.forEach(t.items,function(e){e.isSelected=t.multiCheck.all})):(t.multiCheck.all=!0,t.showButton=!1,angular.forEach(t.items,function(e){e.isSelected||delete t.multiCheck.all,e.isSelected&&(t.showButton=!0)}))},t.multiIds=function(){var e=[];return angular.forEach(t.items,function(t){t.isSelected&&e.push(t._id)}),e},t.switchAll=function(o,n){n.preventDefault();var i=t;l.open({templateUrl:"modal-collectorStatus.html",size:"md",controller:["$scope","$uibModalInstance",function(t,l){t.ok=function(){c.collector.status({id:i.multiIds(),projectid:e.Project.selected._id,status:o},function(){c.collector.info({project:e.Project.selected._id},function(e){delete i.multiCheck.all,i.items=e.result,l.dismiss("cancel")})},function(){l.dismiss("cancel")})},t.cancel=function(){l.dismiss("cancel")}}]})},c.collector.info({project:e.Project.selected._id},function(e){t.items=e.result},function(){delete t.items})}]);