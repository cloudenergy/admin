"use strict";angular.module("app").controller("ChannelSelect",["$scope","$rootScope","$uibModalInstance","$api","ProjectID","SelectedSensors",function(e,n,i,a,s,r){var o;e.currentPage=1,e.project=s,e.popPageSize=8,e.Ok=function(){var n=!0;_.each(e.viewOfSensors,function(e){var i=_.find(r,function(n){return n._id==e._id});n=!1,e.isEnable&&angular.isUndefined(i)&&r.push(e)}),n?e.Cancel():i.close(r)},e.Cancel=function(){i.dismiss("cancel")},e.SwitchSensor=function(e,n){e.preventDefault();var i=_.find(r,function(e){return e._id==n._id});i?r=_.without(r,i):r.push(n),n.isEnable=!n.isEnable},e.onSearchSensor=function(n){n.preventDefault(),e.UpdateViewOfSensors(e.sensorSearchKey)},e.OnSelectAll=function(n){n.preventDefault();for(var i=(e.currentPage-1)*e.popPageSize,a=e.viewOfSensors.length>e.currentPage*e.popPageSize&&e.currentPage*e.popPageSize||e.viewOfSensors.length,s=i;s<a;s++)e.viewOfSensors[s].isEnable=!0},e.UpdateViewOfSensors=function(n){e.viewOfSensors=[],n?_.each(o,function(i){i.title&&i.title.match(n)||i.addrid.match(n)?e.viewOfSensors.push(i):i.channel&&i.channel.match(n)&&e.viewOfSensors.push(i)}):e.viewOfSensors=_.union(e.viewOfSensors,o),_.each(e.viewOfSensors,function(e){var n;n=_.find(r,function(n){return _.isObject(n)?n._id==e._id:n==s+"."+e._id}),e.isEnable=!angular.isUndefined(n)});var i=[];angular.forEach(e.viewOfSensors,function(e){!!e.isEnable&&i.push(e)}),angular.forEach(e.viewOfSensors,function(e){!e.isEnable&&i.push(e)}),e.viewOfSensors=i},a.sensorchannel.info({project:s},function(n){o=[],angular.forEach(n.result,function(e){null!=="冷水刻度热水刻度纯水刻度正向有功能量系数总冷量总热量".match(e.channelname)&&(console.log(null!=="冷水刻度热水刻度纯水刻度正向有功能量系数总冷量总热量".match(e.channelname),e.channelname),o.push(e))}),e.UpdateViewOfSensors()}.bind(this))}]);