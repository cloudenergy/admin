"use strict";angular.module("app").controller("eventcategoryIndex",["$scope","$api","Auth","UI",function(e,t,a,n){e.gateways={SMS:"短信通知",APP:"Web，APP通知",EMAIL:"邮件通知",WECHAT:"微信通知"},e.isGatewayOn=function(e,t){return e.enablegateway.indexOf(t)!=-1},e.updateGateway=function(a,n,o){var i=a.enablegateway.indexOf(n);o.target.checked&&i==-1?a.enablegateway.push(n):a.enablegateway.splice(i,1),t.event.update({templateid:a.id,gateway:a.enablegateway,project:e.Project.selected._id})},e.operateStatus={add:{isEnable:!1,url:"/add"},delete:{isEnable:!1,url:"/delete"},update:{isEnable:!1,url:"/update"}},e.askingRemoveID=void 0,a.Check(e.operateStatus,function(){e.$watch("Project.selected",function(a){a&&t.event.info({project:a._id},function(t){e.Eventcategory=t.result})}),e.DoRemove=function(a,o,i){a.preventDefault();var c=i;t.eventcategory.delete({id:o},function(){e.Eventcategory.splice(c,1)},function(e){n.AlertError(e.message)})},e.AskForRemove=function(t,a){t.preventDefault(),e.askingRemoveID=a},e.CancelRemove=function(t,a){t.preventDefault(),e.askingRemoveID=void 0}})}]);