angular.module("app").controller("eventcategoryIndex",["$rootScope","$scope","Eventcategory","API","Auth","UI",function(e,t,a,n,o,r){t.gateways={SMS:"短信通知",APP:"Web，APP通知",EMAIL:"邮件通知",WECHAT:"微信通知"},t.isGatewayOn=function(e,t){return e.enablegateway.indexOf(t)!=-1},t.updateGateway=function(e,o,r){var u=e.enablegateway.indexOf(o);r.target.checked&&u==-1?e.enablegateway.push(o):e.enablegateway.splice(u,1),n.Query(a.update,{templateid:e.id,gateway:e.enablegateway,project:t.Project.selected._id},function(e){})},t.operateStatus={add:{isEnable:!1,url:"/add"},delete:{isEnable:!1,url:"/delete"},update:{isEnable:!1,url:"/update"}},t.askingRemoveID=void 0,o.Check(t.operateStatus,function(){function e(e){r.AlertError(e.data.message)}t.$watch("Project.selected",function(e){e&&n.Query(a.info,{project:e._id},function(e){e.err||(t.Eventcategory=e.result)})}),t.DoRemove=function(o,r,u){o.preventDefault();var c=u;n.Query(a.delete,{id:r},function(e){t.Eventcategory.splice(c,1)},e)},t.AskForRemove=function(e,a){e.preventDefault(),t.askingRemoveID=a},t.CancelRemove=function(e,a){e.preventDefault(),t.askingRemoveID=void 0}})}]);